<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>unicorn_binance_websocket_api.api &#8212; unicorn-binance-websocket-api 2.2.0 documentation</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=92fd9be5" />
    <link rel="stylesheet" type="text/css" href="../../_static/pydoctheme.css?v=fdf8e9ae" />
    
    <script src="../../_static/documentation_options.js?v=6efca38a"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /><link rel="shortcut icon" type="image/png" href="../../_static/lucit.png" />
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    
    <script
        src='//eu.fw-cdn.com/10659511/361973.js'
        chat='true'>
    </script>
    
            <script type="text/javascript" src="../../_static/copybutton.js"></script>
            <script type="text/javascript" src="../../_static/menu.js"></script> 
  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu" />
    <label for="menuToggler" class="toggler__label">
        <span></span>
    </label>
    <nav class="nav-content" role="navigation">
        <form role="search" class="search" action="../../search.html" method="get">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                <path fill-rule="nonzero"
                        d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#444"></path>
            </svg>
            <input type="text" name="q" aria-label="Quick search"/>
            <input type="submit" value="Go"/>
        </form>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <p class="logo">
                <div style="text-align: center;">
                    <a href="https://www.lucit.tech"><img src="https://www.lucit.tech/files/images/logos/LUCIT-LOGO.png"></a><br>
                    <a href="https://shop.lucit.services/software/unicorn-binance-suite" style="font-size: 0.85em;font-weight: 900">Get a UNICORN Binance Suite License!</a><br>
                    <br>
                    <a href="https://github.com/LUCIT-Systems-and-Development" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-github-20.png"></a>
                    <a href="https://fb.me/lucit.systems.and.development" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-facebook-20.png"></a>
                    <a href="https://twitter.com/LUCIT_SysDev" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-twitter-20.png"></a>
                    <a href="https://www.linkedin.com/company/lucit-systems-and-development" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-linkedin-20.png"></a>
                    <a href="https://www.xing.com/pages/lucit-systems-and-development" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-xing-20.png"></a>
                    <a href="https://medium.lucit.tech" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-medium-monogram-20.png"></a>
                    <a href="https://www.youtube.com/channel/UCp57u8vaPqEWQTlfpYn-KnQ" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-youtube-20.png"></a>
                </div>
            </p>
<div id="searchbox" style="display: block" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<div role="note" aria-label="source code">
    <h3>GitHub</h3>
    <ul class="this-page-menu">
      <li><a href="https://github.com/LUCIT-Systems-and-Development/unicorn-binance-websocket-api">Show Source</a></li>
      
<li>
<a class="github-button" href="https://github.com/LUCIT-Systems-and-Development/unicorn-binance-websocket-api"
   data-icon="octicon-star" data-show-count="true"
   aria-label="Star LUCIT-Systems-and-Development/unicorn-binance-websocket-api on GitHub">Star</a>
<br />
<a class="github-button" href="https://github.com/LUCIT-Systems-and-Development/unicorn-binance-websocket-api/subscription"
   data-icon="octicon-eye" data-show-count="true"
   aria-label="Watch LUCIT-Systems-and-Development/unicorn-binance-websocket-api on GitHub">Watch</a>
<br />
<a class="github-button" href="https://github.com/LUCIT-Systems-and-Development/unicorn-binance-websocket-api/fork"
   data-icon="octicon-repo-forked" data-show-count="true"
   aria-label="Fork LUCIT-Systems-and-Development/unicorn-binance-websocket-api on GitHub">Fork</a>
<br />
<a class="github-button" href="https://github.com/LUCIT-Systems-and-Development/unicorn-binance-websocket-api/issues"
   data-icon="octicon-issue-opened"
   data-show-count="true" aria-label="Issue LUCIT-Systems-and-Development/unicorn-binance-websocket-api on GitHub">Issue</a>
    
</li>

    </ul>
</div>
        </nav>
    </div>
</div>
  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
              
                  
                  
              <li><img src="../../_static/lucit.png" alt="LUCIT Logo"
                       style="vertical-align: middle; margin-top: -1px"/></li>
              <li><a href="https://docs.lucit.tech">Docs Index</a> | </li>
              <li><a href="https://www.lucit.tech/unicorn-binance-websocket-api.html">unicorn-binance-websocket-api</a> &#187;</li>
                  
              
              
              <a href="../../index.html">Docs</a> &#187;
              
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">unicorn_binance_websocket_api.api</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../../search.html" method="get">
          <input placeholder="Quick search" aria-label="Quick search" type="text" name="q" />
          <input type="submit" value="Go" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for unicorn_binance_websocket_api.api</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python3</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1">#</span>
<span class="c1"># File: unicorn_binance_websocket_api/api.py</span>
<span class="c1">#</span>
<span class="c1"># Part of ‘UNICORN Binance WebSocket API’</span>
<span class="c1"># Project website: https://www.lucit.tech/unicorn-binance-websocket-api.html</span>
<span class="c1"># Github: https://github.com/LUCIT-Systems-and-Development/unicorn-binance-websocket-api</span>
<span class="c1"># Documentation: https://unicorn-binance-websocket-api.docs.lucit.tech</span>
<span class="c1"># PyPI: https://pypi.org/project/unicorn-binance-websocket-api</span>
<span class="c1"># LUCIT Online Shop: https://shop.lucit.services/software</span>
<span class="c1">#</span>
<span class="c1"># License: LSOSL - LUCIT Synergetic Open Source License</span>
<span class="c1"># https://github.com/LUCIT-Systems-and-Development/unicorn-binance-websocket-api/blob/master/LICENSE</span>
<span class="c1">#</span>
<span class="c1"># Author: LUCIT Systems and Development</span>
<span class="c1">#</span>
<span class="c1"># Copyright (c) 2019-2023, LUCIT Systems and Development (https://www.lucit.tech)</span>
<span class="c1"># All rights reserved.</span>

<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Union</span>
<span class="k">try</span><span class="p">:</span>
    <span class="c1"># python &lt;=3.7 support</span>
    <span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Literal</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Literal</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">threading</span>


<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;unicorn_binance_websocket_api&quot;</span><span class="p">)</span>


<div class="viewcode-block" id="BinanceWebSocketApiApi">
<a class="viewcode-back" href="../../unicorn_binance_websocket_api.html#unicorn_binance_websocket_api.api.BinanceWebSocketApiApi">[docs]</a>
<span class="k">class</span> <span class="nc">BinanceWebSocketApiApi</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Connect to Binance API via Websocket.</span>

<span class="sd">    This is valid for each `ubwa.api.method()`:</span>

<span class="sd">    If no `stream_id` is provided, we try to find it via a provided `stream_label`, if also not available</span>
<span class="sd">    we use the `stream_id` of the one active websocket api stream if there is one. But if there is not exactly</span>
<span class="sd">    one valid websocket api stream, this will fail! It must be clear! The stream is also valid during a</span>
<span class="sd">    stream restart, the payload is submitted as soon the stream is online again.</span>

<span class="sd">    Read these instructions to get started:</span>

<span class="sd">        - https://medium.lucit.tech/create-and-cancel-orders-via-websocket-on-binance-7f828831404</span>

<span class="sd">    Binance.com SPOT websocket API documentation:</span>

<span class="sd">        - https://binance-docs.github.io/apidocs/websocket_api/en/</span>

<span class="sd">    :param manager: Provide the initiated UNICORN Binance WebSocket API Manager instance.</span>
<span class="sd">    :type manager: BinanceWebsocketApiManager</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">manager</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">manager</span> <span class="o">=</span> <span class="n">manager</span>

<div class="viewcode-block" id="BinanceWebSocketApiApi.cancel_open_orders">
<a class="viewcode-back" href="../../unicorn_binance_websocket_api.html#unicorn_binance_websocket_api.api.BinanceWebSocketApiApi.cancel_open_orders">[docs]</a>
    <span class="k">def</span> <span class="nf">cancel_open_orders</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">process_response</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_response</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">symbol</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                           <span class="n">recv_window</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">request_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">stream_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                           <span class="n">stream_label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cancel all open orders on a symbol, including OCO orders.</span>

<span class="sd">        Official documentation:</span>

<span class="sd">            - https://developers.binance.com/docs/binance-trading-api/websocket_api#cancel-open-orders-trade</span>

<span class="sd">        :param process_response: Provide a function/method to process the received webstream data (callback)</span>
<span class="sd">                                 of this specific request.</span>
<span class="sd">        :type process_response: function</span>
<span class="sd">        :param symbol: The symbol you want to trade</span>
<span class="sd">        :type symbol: int</span>
<span class="sd">        :param recv_window: An additional parameter, `recvWindow`, may be sent to specify the number of milliseconds</span>
<span class="sd">                            after timestamp the request is valid for. If `recvWindow` is not sent, it defaults to 5000.</span>
<span class="sd">                            The value cannot be greater than 60000.</span>
<span class="sd">        :type recv_window: int</span>
<span class="sd">        :param request_id: Provide a custom id for the request</span>
<span class="sd">        :type request_id: str</span>
<span class="sd">        :param return_response: If `True` the response of the API request is waited for and returned directly.</span>
<span class="sd">                                However, this increases the execution time of the function by the duration until the</span>
<span class="sd">                                response is received from the Binance API.</span>
<span class="sd">        :type return_response: bool</span>
<span class="sd">        :param stream_id: ID of a stream to send the request</span>
<span class="sd">        :type stream_id: str</span>
<span class="sd">        :param stream_label: Label of a stream to send the request. Only used if `stream_id` is not provided!</span>
<span class="sd">        :type stream_label: str</span>
<span class="sd">        :return: bool</span>


<span class="sd">        Message Sent:</span>

<span class="sd">        .. code-block:: json</span>

<span class="sd">            {</span>
<span class="sd">                &quot;id&quot;: &quot;778f938f-9041-4b88-9914-efbf64eeacc8&quot;,</span>
<span class="sd">                &quot;method&quot;: &quot;openOrders.cancelAll&quot;</span>
<span class="sd">                &quot;params&quot;: {</span>
<span class="sd">                    &quot;symbol&quot;: &quot;BTCUSDT&quot;,</span>
<span class="sd">                    &quot;apiKey&quot;: &quot;vmPUZE6mv9SD5VNHk4HlWFsOr6aKE2zvsw0MuIgwCIPy6utIco14y7Ju91duEh8A&quot;,</span>
<span class="sd">                    &quot;signature&quot;: &quot;773f01b6e3c2c9e0c1d217bc043ce383c1ddd6f0e25f8d6070f2b66a6ceaf3a5&quot;,</span>
<span class="sd">                    &quot;timestamp&quot;: 1660805557200</span>
<span class="sd">                }</span>
<span class="sd">            }</span>


<span class="sd">        Response:</span>

<span class="sd">        .. code-block:: json</span>

<span class="sd">            {</span>
<span class="sd">                &quot;id&quot;: &quot;778f938f-9041-4b88-9914-efbf64eeacc8&quot;,</span>
<span class="sd">                &quot;status&quot;: 200,</span>
<span class="sd">                &quot;result&quot;: [</span>
<span class="sd">                    {</span>
<span class="sd">                        &quot;symbol&quot;: &quot;BTCUSDT&quot;,</span>
<span class="sd">                        &quot;origClientOrderId&quot;: &quot;4d96324ff9d44481926157&quot;,</span>
<span class="sd">                        &quot;orderId&quot;: 12569099453,</span>
<span class="sd">                        &quot;orderListId&quot;: -1,</span>
<span class="sd">                        &quot;clientOrderId&quot;: &quot;91fe37ce9e69c90d6358c0&quot;,</span>
<span class="sd">                        &quot;price&quot;: &quot;23416.10000000&quot;,</span>
<span class="sd">                        &quot;origQty&quot;: &quot;0.00847000&quot;,</span>
<span class="sd">                        &quot;executedQty&quot;: &quot;0.00001000&quot;,</span>
<span class="sd">                        &quot;cummulativeQuoteQty&quot;: &quot;0.23416100&quot;,</span>
<span class="sd">                        &quot;status&quot;: &quot;CANCELED&quot;,</span>
<span class="sd">                        &quot;timeInForce&quot;: &quot;GTC&quot;,</span>
<span class="sd">                        &quot;type&quot;: &quot;LIMIT&quot;,</span>
<span class="sd">                        &quot;side&quot;: &quot;SELL&quot;,</span>
<span class="sd">                        &quot;stopPrice&quot;: &quot;0.00000000&quot;,</span>
<span class="sd">                        &quot;trailingDelta&quot;: 0,</span>
<span class="sd">                        &quot;trailingTime&quot;: -1,</span>
<span class="sd">                        &quot;icebergQty&quot;: &quot;0.00000000&quot;,</span>
<span class="sd">                        &quot;strategyId&quot;: 37463720,</span>
<span class="sd">                        &quot;strategyType&quot;: 1000000,</span>
<span class="sd">                        &quot;selfTradePreventionMode&quot;: &quot;NONE&quot;</span>
<span class="sd">                    },</span>
<span class="sd">                    {</span>
<span class="sd">                        &quot;orderListId&quot;: 19431,</span>
<span class="sd">                        &quot;contingencyType&quot;: &quot;OCO&quot;,</span>
<span class="sd">                        &quot;listStatusType&quot;: &quot;ALL_DONE&quot;,</span>
<span class="sd">                        &quot;listOrderStatus&quot;: &quot;ALL_DONE&quot;,</span>
<span class="sd">                        &quot;listClientOrderId&quot;: &quot;iuVNVJYYrByz6C4yGOPPK0&quot;,</span>
<span class="sd">                        &quot;transactionTime&quot;: 1660803702431,</span>
<span class="sd">                        &quot;symbol&quot;: &quot;BTCUSDT&quot;,</span>
<span class="sd">                        &quot;orders&quot;: [</span>
<span class="sd">                            {</span>
<span class="sd">                            &quot;symbol&quot;: &quot;BTCUSDT&quot;,</span>
<span class="sd">                            &quot;orderId&quot;: 12569099453,</span>
<span class="sd">                            &quot;clientOrderId&quot;: &quot;bX5wROblo6YeDwa9iTLeyY&quot;</span>
<span class="sd">                            },</span>
<span class="sd">                            {</span>
<span class="sd">                            &quot;symbol&quot;: &quot;BTCUSDT&quot;,</span>
<span class="sd">                            &quot;orderId&quot;: 12569099454,</span>
<span class="sd">                            &quot;clientOrderId&quot;: &quot;Tnu2IP0J5Y4mxw3IATBfmW&quot;</span>
<span class="sd">                            }</span>
<span class="sd">                        ],</span>
<span class="sd">                        &quot;orderReports&quot;: [</span>
<span class="sd">                            {</span>
<span class="sd">                                &quot;symbol&quot;: &quot;BTCUSDT&quot;,</span>
<span class="sd">                                &quot;origClientOrderId&quot;: &quot;bX5wROblo6YeDwa9iTLeyY&quot;,</span>
<span class="sd">                                &quot;orderId&quot;: 12569099453,</span>
<span class="sd">                                &quot;orderListId&quot;: 19431,</span>
<span class="sd">                                &quot;clientOrderId&quot;: &quot;OFFXQtxVFZ6Nbcg4PgE2DA&quot;,</span>
<span class="sd">                                &quot;price&quot;: &quot;23450.50000000&quot;,</span>
<span class="sd">                                &quot;origQty&quot;: &quot;0.00850000&quot;,</span>
<span class="sd">                                &quot;executedQty&quot;: &quot;0.00000000&quot;,</span>
<span class="sd">                                &quot;cummulativeQuoteQty&quot;: &quot;0.00000000&quot;,</span>
<span class="sd">                                &quot;status&quot;: &quot;CANCELED&quot;,</span>
<span class="sd">                                &quot;timeInForce&quot;: &quot;GTC&quot;,</span>
<span class="sd">                                &quot;type&quot;: &quot;STOP_LOSS_LIMIT&quot;,</span>
<span class="sd">                                &quot;side&quot;: &quot;BUY&quot;,</span>
<span class="sd">                                &quot;stopPrice&quot;: &quot;23430.00000000&quot;,</span>
<span class="sd">                                &quot;selfTradePreventionMode&quot;: &quot;NONE&quot;</span>
<span class="sd">                            },</span>
<span class="sd">                            {</span>
<span class="sd">                                &quot;symbol&quot;: &quot;BTCUSDT&quot;,</span>
<span class="sd">                                &quot;origClientOrderId&quot;: &quot;Tnu2IP0J5Y4mxw3IATBfmW&quot;,</span>
<span class="sd">                                &quot;orderId&quot;: 12569099454,</span>
<span class="sd">                                &quot;orderListId&quot;: 19431,</span>
<span class="sd">                                &quot;clientOrderId&quot;: &quot;OFFXQtxVFZ6Nbcg4PgE2DA&quot;,</span>
<span class="sd">                                &quot;price&quot;: &quot;23400.00000000&quot;,</span>
<span class="sd">                                &quot;origQty&quot;: &quot;0.00850000&quot;,</span>
<span class="sd">                                &quot;executedQty&quot;: &quot;0.00000000&quot;,</span>
<span class="sd">                                &quot;cummulativeQuoteQty&quot;: &quot;0.00000000&quot;,</span>
<span class="sd">                                &quot;status&quot;: &quot;CANCELED&quot;,</span>
<span class="sd">                                &quot;timeInForce&quot;: &quot;GTC&quot;,</span>
<span class="sd">                                &quot;type&quot;: &quot;LIMIT_MAKER&quot;,</span>
<span class="sd">                                &quot;side&quot;: &quot;BUY&quot;,</span>
<span class="sd">                                &quot;selfTradePreventionMode&quot;: &quot;NONE&quot;</span>
<span class="sd">                            }</span>
<span class="sd">                        ]</span>
<span class="sd">                    }</span>
<span class="sd">                ],</span>
<span class="sd">                &quot;rateLimits&quot;: [</span>
<span class="sd">                    {</span>
<span class="sd">                        &quot;rateLimitType&quot;: &quot;REQUEST_WEIGHT&quot;,</span>
<span class="sd">                        &quot;interval&quot;: &quot;MINUTE&quot;,</span>
<span class="sd">                        &quot;intervalNum&quot;: 1,</span>
<span class="sd">                        &quot;limit&quot;: 1200,</span>
<span class="sd">                        &quot;count&quot;: 1</span>
<span class="sd">                    }</span>
<span class="sd">                ]</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">stream_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">stream_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">stream_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_stream_id_by_label</span><span class="p">(</span><span class="n">stream_label</span><span class="o">=</span><span class="n">stream_label</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">stream_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_the_one_active_websocket_api</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">stream_id</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;BinanceWebSocketApiApi.cancel_open_orders() - error_msg: No `stream_id` provided or &quot;</span>
                                <span class="sa">f</span><span class="s2">&quot;found!&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;apiKey&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">stream_list</span><span class="p">[</span><span class="n">stream_id</span><span class="p">][</span><span class="s1">&#39;api_key&#39;</span><span class="p">],</span>
                  <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">symbol</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span>
                  <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_timestamp</span><span class="p">()}</span>

        <span class="k">if</span> <span class="n">recv_window</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;recvWindow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">recv_window</span><span class="p">)</span>

        <span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;openOrders.cancelAll&quot;</span>
        <span class="n">api_secret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">stream_list</span><span class="p">[</span><span class="n">stream_id</span><span class="p">][</span><span class="s1">&#39;api_secret&#39;</span><span class="p">]</span>
        <span class="n">request_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_new_uuid_id</span><span class="p">()</span> <span class="k">if</span> <span class="n">request_id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">request_id</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;signature&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">generate_signature</span><span class="p">(</span><span class="n">api_secret</span><span class="o">=</span><span class="n">api_secret</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

        <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">request_id</span><span class="p">,</span>
                   <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span>
                   <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="n">params</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">process_response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">process_response_lock</span><span class="p">:</span>
                <span class="n">entry</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;callback_function&#39;</span><span class="p">:</span> <span class="n">process_response</span><span class="p">}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">process_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">add_payload_to_stream</span><span class="p">(</span><span class="n">stream_id</span><span class="o">=</span><span class="n">stream_id</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">return_response</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response_lock</span><span class="p">:</span>
                <span class="n">entry</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;event_return_response&#39;</span><span class="p">:</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">][</span><span class="s1">&#39;event_return_response&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response_lock</span><span class="p">:</span>
                <span class="n">response_value</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">][</span><span class="s1">&#39;response_value&#39;</span><span class="p">])</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">response_value</span>

        <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="BinanceWebSocketApiApi.cancel_order">
<a class="viewcode-back" href="../../unicorn_binance_websocket_api.html#unicorn_binance_websocket_api.api.BinanceWebSocketApiApi.cancel_order">[docs]</a>
    <span class="k">def</span> <span class="nf">cancel_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cancel_restrictions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;ONLY_NEW&#39;</span><span class="p">,</span> <span class="s1">&#39;ONLY_PARTIALLY_FILLED&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="n">new_client_order_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">order_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">orig_client_order_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="n">process_response</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">recv_window</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">request_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="n">return_response</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">stream_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">symbol</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="n">stream_label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cancel an active order.</span>

<span class="sd">        If you cancel an order that is a part of an OCO pair, the entire OCO is canceled.</span>

<span class="sd">        Official documentation:</span>

<span class="sd">            - https://developers.binance.com/docs/binance-trading-api/websocket_api#cancel-order-trade</span>

<span class="sd">        :param cancel_restrictions: Supported values:</span>

<span class="sd">                                      - ONLY_NEW: Cancel will succeed if the order status is `NEW`.</span>

<span class="sd">                                      - ONLY_PARTIALLY_FILLED: Cancel will succeed if order status is</span>
<span class="sd">                                        `PARTIALLY_FILLED`.</span>

<span class="sd">                                    If the cancelRestrictions value is not any of the supported values, the error will</span>
<span class="sd">                                    be: `{&quot;code&quot;: -1145,&quot;msg&quot;: &quot;Invalid cancelRestrictions&quot;}`</span>

<span class="sd">                                    If the order did not pass the conditions for cancelRestrictions, the error will be:</span>
<span class="sd">                                    `{&quot;code&quot;: -2011,&quot;msg&quot;: &quot;Order was not canceled due to cancel restrictions.&quot;}`</span>
<span class="sd">        :type cancel_restrictions: str</span>
<span class="sd">        :param new_client_order_id: New ID for the canceled order. Automatically generated if not sent.</span>
<span class="sd">                                    `newClientOrderId` will replace `clientOrderId` of the canceled order, freeing it</span>
<span class="sd">                                    up for new orders.</span>
<span class="sd">        :type new_client_order_id: str</span>
<span class="sd">        :param order_id: Cancel by `order_id`. If both `orderId` and `origClientOrderId` parameters are specified, only</span>
<span class="sd">                         `orderId` is used and `origClientOrderId` is ignored.</span>
<span class="sd">        :type order_id: str</span>
<span class="sd">        :param orig_client_order_id: Cancel by `origClientOrderId`. If both `orderId` and `origClientOrderId` parameters</span>
<span class="sd">                                     are specified, only `orderId` is used and `origClientOrderId` is ignored.</span>
<span class="sd">        :type orig_client_order_id: str</span>
<span class="sd">        :param process_response: Provide a function/method to process the received webstream data (callback)</span>
<span class="sd">                                 of this specific request.</span>
<span class="sd">        :type process_response: function</span>
<span class="sd">        :param recv_window: An additional parameter, `recvWindow`, may be sent to specify the number of milliseconds</span>
<span class="sd">                            after timestamp the request is valid for. If `recvWindow` is not sent, it defaults to 5000.</span>
<span class="sd">                            The value cannot be greater than 60000.</span>
<span class="sd">        :type recv_window: int</span>
<span class="sd">        :param request_id: Provide a custom id for the request</span>
<span class="sd">        :type request_id: str</span>
<span class="sd">        :param return_response: If `True` the response of the API request is waited for and returned directly.</span>
<span class="sd">                                However, this increases the execution time of the function by the duration until the</span>
<span class="sd">                                response is received from the Binance API.</span>
<span class="sd">        :type return_response: bool</span>
<span class="sd">        :param stream_id: ID of a stream to send the request</span>
<span class="sd">        :type stream_id: str</span>
<span class="sd">        :param stream_label: Label of a stream to send the request. Only used if `stream_id` is not provided!</span>
<span class="sd">        :type stream_label: str</span>
<span class="sd">        :param symbol: The symbol of the order you want to cancel</span>
<span class="sd">        :type symbol: str</span>
<span class="sd">        :return: bool</span>


<span class="sd">        Message sent:</span>

<span class="sd">        .. code-block:: json</span>

<span class="sd">            {</span>
<span class="sd">                &quot;id&quot;: &quot;5633b6a2-90a9-4192-83e7-925c90b6a2fd&quot;,</span>
<span class="sd">                &quot;method&quot;: &quot;order.cancel&quot;,</span>
<span class="sd">                &quot;params&quot;: {</span>
<span class="sd">                    &quot;symbol&quot;: &quot;BTCUSDT&quot;,</span>
<span class="sd">                    &quot;origClientOrderId&quot;: &quot;4d96324ff9d44481926157&quot;,</span>
<span class="sd">                    &quot;apiKey&quot;: &quot;vmPUZE6mv9SD5VNHk4HlWFsOr6aKE2zvsw0MuIgwCIPy6utIco14y7Ju91duEh8A&quot;,</span>
<span class="sd">                    &quot;signature&quot;: &quot;33d5b721f278ae17a52f004a82a6f68a70c68e7dd6776ed0be77a455ab855282&quot;,</span>
<span class="sd">                    &quot;timestamp&quot;: 1660801715830</span>
<span class="sd">                }</span>
<span class="sd">            }</span>


<span class="sd">        Response:</span>

<span class="sd">        .. code-block:: json</span>

<span class="sd">            {</span>
<span class="sd">                &quot;id&quot;: &quot;5633b6a2-90a9-4192-83e7-925c90b6a2fd&quot;,</span>
<span class="sd">                &quot;status&quot;: 200,</span>
<span class="sd">                &quot;result&quot;: {</span>
<span class="sd">                    &quot;symbol&quot;: &quot;BTCUSDT&quot;,</span>
<span class="sd">                    &quot;origClientOrderId&quot;: &quot;4d96324ff9d44481926157&quot;,</span>
<span class="sd">                    &quot;orderId&quot;: 12569099453,</span>
<span class="sd">                    &quot;orderListId&quot;: -1,</span>
<span class="sd">                    &quot;clientOrderId&quot;: &quot;91fe37ce9e69c90d6358c0&quot;,</span>
<span class="sd">                    &quot;price&quot;: &quot;23416.10000000&quot;,</span>
<span class="sd">                    &quot;origQty&quot;: &quot;0.00847000&quot;,</span>
<span class="sd">                    &quot;executedQty&quot;: &quot;0.00001000&quot;,</span>
<span class="sd">                    &quot;cummulativeQuoteQty&quot;: &quot;0.23416100&quot;,</span>
<span class="sd">                    &quot;status&quot;: &quot;CANCELED&quot;,</span>
<span class="sd">                    &quot;timeInForce&quot;: &quot;GTC&quot;,</span>
<span class="sd">                    &quot;type&quot;: &quot;LIMIT&quot;,</span>
<span class="sd">                    &quot;side&quot;: &quot;SELL&quot;,</span>
<span class="sd">                    &quot;stopPrice&quot;: &quot;0.00000000&quot;,</span>
<span class="sd">                    &quot;trailingDelta&quot;: 0,</span>
<span class="sd">                    &quot;trailingTime&quot;: -1,</span>
<span class="sd">                    &quot;icebergQty&quot;: &quot;0.00000000&quot;,</span>
<span class="sd">                    &quot;strategyId&quot;: 37463720,</span>
<span class="sd">                    &quot;strategyType&quot;: 1000000,</span>
<span class="sd">                    &quot;selfTradePreventionMode&quot;: &quot;NONE&quot;</span>
<span class="sd">                },</span>
<span class="sd">                &quot;rateLimits&quot;: [</span>
<span class="sd">                    {</span>
<span class="sd">                        &quot;rateLimitType&quot;: &quot;REQUEST_WEIGHT&quot;,</span>
<span class="sd">                        &quot;interval&quot;: &quot;MINUTE&quot;,</span>
<span class="sd">                        &quot;intervalNum&quot;: 1,</span>
<span class="sd">                        &quot;limit&quot;: 1200,</span>
<span class="sd">                        &quot;count&quot;: 1</span>
<span class="sd">                    }</span>
<span class="sd">                ]</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">stream_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">stream_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">stream_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_stream_id_by_label</span><span class="p">(</span><span class="n">stream_label</span><span class="o">=</span><span class="n">stream_label</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">stream_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_the_one_active_websocket_api</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">stream_id</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;BinanceWebSocketApiApi.cancel_open_orders() - error_msg: No `stream_id` provided or &quot;</span>
                                <span class="sa">f</span><span class="s2">&quot;found!&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;apiKey&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">stream_list</span><span class="p">[</span><span class="n">stream_id</span><span class="p">][</span><span class="s1">&#39;api_key&#39;</span><span class="p">],</span>
                  <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">symbol</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span>
                  <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_timestamp</span><span class="p">()}</span>

        <span class="k">if</span> <span class="n">cancel_restrictions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;cancelRestrictions&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cancel_restrictions</span>
        <span class="k">if</span> <span class="n">new_client_order_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;newClientOrderId&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_client_order_id</span>
        <span class="k">if</span> <span class="n">order_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;orderId&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">order_id</span>
        <span class="k">if</span> <span class="n">orig_client_order_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;origClientOrderId&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">orig_client_order_id</span>
        <span class="k">if</span> <span class="n">recv_window</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;recvWindow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">recv_window</span><span class="p">)</span>

        <span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;order.cancel&quot;</span>
        <span class="n">api_secret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">stream_list</span><span class="p">[</span><span class="n">stream_id</span><span class="p">][</span><span class="s1">&#39;api_secret&#39;</span><span class="p">]</span>
        <span class="n">request_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_new_uuid_id</span><span class="p">()</span> <span class="k">if</span> <span class="n">request_id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">request_id</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;signature&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">generate_signature</span><span class="p">(</span><span class="n">api_secret</span><span class="o">=</span><span class="n">api_secret</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

        <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">request_id</span><span class="p">,</span>
                   <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span>
                   <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="n">params</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">process_response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">process_response_lock</span><span class="p">:</span>
                <span class="n">entry</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;callback_function&#39;</span><span class="p">:</span> <span class="n">process_response</span><span class="p">}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">process_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">add_payload_to_stream</span><span class="p">(</span><span class="n">stream_id</span><span class="o">=</span><span class="n">stream_id</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">return_response</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response_lock</span><span class="p">:</span>
                <span class="n">entry</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;event_return_response&#39;</span><span class="p">:</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">][</span><span class="s1">&#39;event_return_response&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response_lock</span><span class="p">:</span>
                <span class="n">response_value</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">][</span><span class="s1">&#39;response_value&#39;</span><span class="p">])</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">response_value</span>

        <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="BinanceWebSocketApiApi.create_order">
<a class="viewcode-back" href="../../unicorn_binance_websocket_api.html#unicorn_binance_websocket_api.api.BinanceWebSocketApiApi.create_order">[docs]</a>
    <span class="k">def</span> <span class="nf">create_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iceberg_qty</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="n">new_client_order_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="n">new_order_resp_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;ACK&#39;</span><span class="p">,</span> <span class="s1">&#39;RESULT&#39;</span><span class="p">,</span> <span class="s1">&#39;FULL&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="n">order_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;LIMIT&#39;</span><span class="p">,</span> <span class="s1">&#39;LIMIT_MAKER&#39;</span><span class="p">,</span> <span class="s1">&#39;MARKET&#39;</span><span class="p">,</span> <span class="s1">&#39;STOP_LOSS&#39;</span><span class="p">,</span> <span class="s1">&#39;STOP_LOSS_LIMIT&#39;</span><span class="p">,</span>
                                                  <span class="s1">&#39;TAKE_PROFIT&#39;</span><span class="p">,</span> <span class="s1">&#39;TAKE_PROFIT_LIMIT&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="n">price</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
                     <span class="n">process_response</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">quantity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
                     <span class="n">quote_order_qty</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="n">recv_window</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="n">request_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="n">return_response</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                     <span class="n">self_trade_prevention_mode</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;EXPIRE_TAKER&#39;</span><span class="p">,</span> <span class="s1">&#39;EXPIRE_MAKER&#39;</span><span class="p">,</span>
                                                                  <span class="s1">&#39;EXPIRE_BOTH&#39;</span><span class="p">,</span> <span class="s1">&#39;NONE&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="n">side</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;BUY&#39;</span><span class="p">,</span> <span class="s1">&#39;SELL&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="n">stop_price</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="n">strategy_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="n">strategy_type</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="n">stream_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">stream_label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="n">symbol</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                     <span class="n">time_in_force</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;GTC&#39;</span><span class="p">,</span> <span class="s1">&#39;IOC&#39;</span><span class="p">,</span> <span class="s1">&#39;FOK&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;GTC&quot;</span><span class="p">,</span>
                     <span class="n">test</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                     <span class="n">trailing_delta</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new order.</span>

<span class="sd">        Official documentation:</span>

<span class="sd">            - https://github.com/binance/binance-spot-api-docs/blob/master/web-socket-api.md#place-new-order-trade</span>

<span class="sd">        :param iceberg_qty: Any `LIMIT` or `LIMIT_MAKER` order can be made into an iceberg order by specifying the</span>
<span class="sd">                            `icebergQty`. An order with an `icebergQty` must have `timeInForce` set to `GTC`.</span>
<span class="sd">        :type iceberg_qty: float</span>
<span class="sd">        :param new_client_order_id: `newClientOrderId` specifies `clientOrderId` value for the order. A new order with</span>
<span class="sd">                                    the same &#39;clientOrderId&#39; is accepted only when the previous one is filled or</span>
<span class="sd">                                    expired.</span>
<span class="sd">        :type new_client_order_id: str</span>
<span class="sd">        :param new_order_resp_type: Select response format: `ACK`, `RESULT`, `FULL`.</span>
<span class="sd">                                    &#39;MARKET&#39; and &#39;LIMIT&#39; orders use `FULL` by default, other order types default to</span>
<span class="sd">                                    &#39;ACK&#39;</span>
<span class="sd">        :type new_order_resp_type: str</span>
<span class="sd">        :param order_type: &#39;LIMIT&#39;, &#39;LIMIT_MAKER&#39;, &#39;MARKET&#39;, &#39;STOP_LOSS&#39;, &#39;STOP_LOSS_LIMIT&#39;, &#39;TAKE_PROFIT&#39;,</span>
<span class="sd">                           &#39;TAKE_PROFIT_LIMIT&#39;</span>

<span class="sd">                           Mandatory parameters per `order_type`:</span>

<span class="sd">                             - LIMIT: &#39;timeInForce&#39;, &#39;price&#39;, &#39;quantity&#39;</span>

<span class="sd">                             - LIMIT_MAKER: &#39;price&#39;, &#39;quantity&#39;</span>

<span class="sd">                             - MARKET: &#39;quantity&#39; or &#39;quoteOrderQty&#39;</span>

<span class="sd">                             - STOP_LOSS: &#39;quantity&#39;, &#39;stopPrice&#39; or &#39;trailingDelta&#39;</span>

<span class="sd">                             - STOP_LOSS_LIMIT: &#39;timeInForce&#39;, &#39;price&#39;, &#39;quantity&#39;, &#39;stopPrice&#39; or &#39;trailingDelta&#39;</span>

<span class="sd">                             - TAKE_PROFIT: &#39;quantity&#39;, &#39;stopPrice&#39; or &#39;trailingDelta&#39;</span>

<span class="sd">                             - TAKE_PROFIT_LIMIT: &#39;timeInForce&#39;, &#39;price&#39;, &#39;quantity&#39;, &#39;stopPrice&#39; or &#39;trailingDelta&#39;</span>
<span class="sd">        :type order_type: str</span>
<span class="sd">        :param price: Price e.g. 10.223</span>
<span class="sd">        :type price: float</span>
<span class="sd">        :param process_response: Provide a function/method to process the received webstream data (callback)</span>
<span class="sd">                                 of this specific request.</span>
<span class="sd">        :type process_response: function</span>
<span class="sd">        :param quantity: Amount e.g. 20.5</span>
<span class="sd">        :type quantity: float</span>
<span class="sd">        :param quote_order_qty: Amount e.g. 20.5</span>
<span class="sd">        :type quote_order_qty: float</span>
<span class="sd">        :param recv_window: An additional parameter, `recvWindow`, may be sent to specify the number of milliseconds</span>
<span class="sd">                            after timestamp the request is valid for. If `recvWindow` is not sent, it defaults to 5000.</span>
<span class="sd">                            The value cannot be greater than 60000.</span>
<span class="sd">        :type recv_window: int</span>
<span class="sd">        :param request_id: Provide a custom id for the request</span>
<span class="sd">        :type request_id: str</span>
<span class="sd">        :param return_response: If `True` the response of the API request is waited for and returned directly.</span>
<span class="sd">                                However, this increases the execution time of the function by the duration until the</span>
<span class="sd">                                response is received from the Binance API.</span>
<span class="sd">        :type return_response: bool</span>
<span class="sd">        :param self_trade_prevention_mode: The allowed enums for `selfTradePreventionMode` is dependent on what is</span>
<span class="sd">                                           configured on the symbol. The possible supported values are `EXPIRE_TAKER`,</span>
<span class="sd">                                           `EXPIRE_MAKER`, `EXPIRE_BOTH`, `NONE`.</span>
<span class="sd">        :type self_trade_prevention_mode: str</span>
<span class="sd">        :param side: `BUY` or `SELL`</span>
<span class="sd">        :type side: str</span>
<span class="sd">        :param strategy_id: Arbitrary numeric value identifying the order within an order strategy.</span>
<span class="sd">        :type strategy_id: int</span>
<span class="sd">        :param strategy_type: Arbitrary numeric value identifying the order strategy. Values smaller than 1000000 are</span>
<span class="sd">                              reserved and cannot be used.</span>
<span class="sd">        :type strategy_type: int</span>
<span class="sd">        :param stream_id: ID of a stream to send the request</span>
<span class="sd">        :type stream_id: str</span>
<span class="sd">        :param stream_label: Label of a stream to send the request. Only used if `stream_id` is not provided!</span>
<span class="sd">        :type stream_label: str</span>
<span class="sd">        :param stop_price: Trigger order price rules for STOP_LOSS/TAKE_PROFIT orders:</span>

<span class="sd">                             - `stopPrice` must be above market price: STOP_LOSS BUY, TAKE_PROFIT SELL</span>

<span class="sd">                             - stopPrice must be below market price: STOP_LOSS SELL, TAKE_PROFIT BUY</span>
<span class="sd">        :type stop_price: float</span>
<span class="sd">        :param symbol: The symbol you want to trade</span>
<span class="sd">        :type symbol: str</span>
<span class="sd">        :param test: Test order placement. Validates new order parameters and verifies your signature but does not</span>
<span class="sd">                     send the order into the matching engine.</span>
<span class="sd">        :type test: bool</span>
<span class="sd">        :param time_in_force: Available timeInForce options, setting how long the order should be active before</span>
<span class="sd">                              expiration:</span>

<span class="sd">                                - GTC: Good &#39;til Canceled – the order will remain on the book until you cancel it, or</span>
<span class="sd">                                  the order is completely filled.</span>

<span class="sd">                                - IOC: Immediate or Cancel – the order will be filled for as much as possible, the</span>
<span class="sd">                                  unfilled quantity immediately expires.</span>

<span class="sd">                                - FOK: Fill or Kill – the order will expire unless it cannot be immediately filled for</span>
<span class="sd">                                  the entire quantity.</span>

<span class="sd">                              `MARKET` orders using `quoteOrderQty` follow `LOT_SIZE` filter rules. The order will</span>
<span class="sd">                              execute a quantity that has notional value as close as possible to requested</span>
<span class="sd">                              `quoteOrderQty`.</span>
<span class="sd">        :type time_in_force: str</span>
<span class="sd">        :param trailing_delta: For more details on SPOT implementation on trailing stops, please refer to</span>
<span class="sd">                               `Trailing Stop FAQ &lt;https://github.com/binance/binance-spot-api-docs/blob/master/faqs/trailing-stop-faq.md&gt;`_</span>
<span class="sd">        :type trailing_delta: int</span>

<span class="sd">        :return: `False` or `orig_client_order_id`</span>


<span class="sd">        Message sent:</span>

<span class="sd">        .. code-block:: json</span>

<span class="sd">            {</span>
<span class="sd">                &quot;id&quot;: &quot;56374a46-3061-486b-a311-99ee972eb648&quot;,</span>
<span class="sd">                &quot;method&quot;: &quot;order.place&quot;,</span>
<span class="sd">                &quot;params&quot;: {</span>
<span class="sd">                    &quot;symbol&quot;: &quot;BTCUSDT&quot;,</span>
<span class="sd">                    &quot;side&quot;: &quot;SELL&quot;,</span>
<span class="sd">                    &quot;type&quot;: &quot;LIMIT&quot;,</span>
<span class="sd">                    &quot;timeInForce&quot;: &quot;GTC&quot;,</span>
<span class="sd">                    &quot;price&quot;: &quot;23416.10000000&quot;,</span>
<span class="sd">                    &quot;quantity&quot;: &quot;0.00847000&quot;,</span>
<span class="sd">                    &quot;apiKey&quot;: &quot;vmPUZE6mv9SD5VNHk4HlWFsOr6aKE2zvsw0MuIgwCIPy6utIco14y7Ju91duEh8A&quot;,</span>
<span class="sd">                    &quot;signature&quot;: &quot;15af09e41c36f3cc61378c2fbe2c33719a03dd5eba8d0f9206fbda44de717c88&quot;,</span>
<span class="sd">                    &quot;timestamp&quot;: 1660801715431</span>
<span class="sd">                }</span>
<span class="sd">            }</span>


<span class="sd">        Response</span>

<span class="sd">        .. code-block:: json</span>

<span class="sd">            {</span>
<span class="sd">                &quot;id&quot;: &quot;56374a46-3061-486b-a311-99ee972eb648&quot;,</span>
<span class="sd">                &quot;status&quot;: 200,</span>
<span class="sd">                &quot;result&quot;: {</span>
<span class="sd">                    &quot;symbol&quot;: &quot;BTCUSDT&quot;,</span>
<span class="sd">                    &quot;orderId&quot;: 12569099453,</span>
<span class="sd">                    &quot;orderListId&quot;: -1,</span>
<span class="sd">                    &quot;clientOrderId&quot;: &quot;4d96324ff9d44481926157ec08158a40&quot;,</span>
<span class="sd">                    &quot;transactTime&quot;: 1660801715639</span>
<span class="sd">                },</span>
<span class="sd">                &quot;rateLimits&quot;: [</span>
<span class="sd">                    {</span>
<span class="sd">                        &quot;rateLimitType&quot;: &quot;ORDERS&quot;,</span>
<span class="sd">                        &quot;interval&quot;: &quot;SECOND&quot;,</span>
<span class="sd">                        &quot;intervalNum&quot;: 10,</span>
<span class="sd">                        &quot;limit&quot;: 50,</span>
<span class="sd">                        &quot;count&quot;: 1</span>
<span class="sd">                    },</span>
<span class="sd">                    {</span>
<span class="sd">                        &quot;rateLimitType&quot;: &quot;ORDERS&quot;,</span>
<span class="sd">                        &quot;interval&quot;: &quot;DAY&quot;,</span>
<span class="sd">                        &quot;intervalNum&quot;: 1,</span>
<span class="sd">                        &quot;limit&quot;: 160000,</span>
<span class="sd">                        &quot;count&quot;: 1</span>
<span class="sd">                    },</span>
<span class="sd">                    {</span>
<span class="sd">                        &quot;rateLimitType&quot;: &quot;REQUEST_WEIGHT&quot;,</span>
<span class="sd">                        &quot;interval&quot;: &quot;MINUTE&quot;,</span>
<span class="sd">                        &quot;intervalNum&quot;: 1,</span>
<span class="sd">                        &quot;limit&quot;: 1200,</span>
<span class="sd">                        &quot;count&quot;: 1</span>
<span class="sd">                    }</span>
<span class="sd">                ]</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">stream_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">stream_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">stream_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_stream_id_by_label</span><span class="p">(</span><span class="n">stream_label</span><span class="o">=</span><span class="n">stream_label</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">stream_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_the_one_active_websocket_api</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">stream_id</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;BinanceWebSocketApiApi.create_order() - error_msg: No `stream_id` provided or &quot;</span>
                                <span class="sa">f</span><span class="s2">&quot;found!&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="n">new_client_order_id</span> <span class="o">=</span> <span class="n">new_client_order_id</span> <span class="k">if</span> <span class="n">new_client_order_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_request_id</span><span class="p">()</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;apiKey&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">stream_list</span><span class="p">[</span><span class="n">stream_id</span><span class="p">][</span><span class="s1">&#39;api_key&#39;</span><span class="p">],</span>
                  <span class="s2">&quot;newClientOrderId&quot;</span><span class="p">:</span> <span class="n">new_client_order_id</span><span class="p">,</span>
                  <span class="s2">&quot;quantity&quot;</span><span class="p">:</span> <span class="n">quantity</span><span class="p">,</span>
                  <span class="s2">&quot;side&quot;</span><span class="p">:</span> <span class="n">side</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span>
                  <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">symbol</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span>
                  <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_timestamp</span><span class="p">(),</span>
                  <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">order_type</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">iceberg_qty</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;icebergQty&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">iceberg_qty</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">new_order_resp_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;newOrderRespType&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_order_resp_type</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">order_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;LIMIT&quot;</span> <span class="ow">or</span>
                <span class="n">order_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;LIMIT_MAKER&quot;</span> <span class="ow">or</span>
                <span class="n">order_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;STOP_LOSS_LIMIT&quot;</span> <span class="ow">or</span>
                <span class="n">order_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;TAKE_PROFIT_LIMIT&quot;</span><span class="p">):</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">price</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">order_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;LIMIT&quot;</span> <span class="ow">or</span>
                <span class="n">order_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;STOP_LOSS_LIMIT&quot;</span> <span class="ow">or</span>
                <span class="n">order_type</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;TAKE_PROFIT_LIMIT&quot;</span><span class="p">):</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;timeInForce&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">time_in_force</span>
        <span class="k">if</span> <span class="n">quote_order_qty</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;quoteOrderQty&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">quote_order_qty</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">quantity</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;BinanceWebSocketApiApi.create_order() - error_msg: By using the parameter &quot;</span>
                               <span class="sa">f</span><span class="s2">&quot;`quoteOrderQty` the use of `quantity` is suppressed!&quot;</span><span class="p">)</span>
            <span class="k">del</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;quantity&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">recv_window</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;recvWindow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">recv_window</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">self_trade_prevention_mode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;selfTradePreventionMode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">self_trade_prevention_mode</span>
        <span class="k">if</span> <span class="n">stop_price</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;stopPrice&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">stop_price</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">trailing_delta</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;BinanceWebSocketApiApi.create_order() - error_msg: By using the parameter `stopPrice` &quot;</span>
                               <span class="sa">f</span><span class="s2">&quot;the use of `trailingDelta` is suppressed!&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">trailing_delta</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;trailingDelta&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">trailing_delta</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">strategy_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;strategyId&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">strategy_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">strategy_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;strategyType&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">strategy_type</span><span class="p">)</span>

        <span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;order.test&quot;</span> <span class="k">if</span> <span class="n">test</span> <span class="ow">is</span> <span class="kc">True</span> <span class="k">else</span> <span class="s2">&quot;order.place&quot;</span>
        <span class="n">api_secret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">stream_list</span><span class="p">[</span><span class="n">stream_id</span><span class="p">][</span><span class="s1">&#39;api_secret&#39;</span><span class="p">]</span>
        <span class="n">request_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_new_uuid_id</span><span class="p">()</span> <span class="k">if</span> <span class="n">request_id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">request_id</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;signature&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">generate_signature</span><span class="p">(</span><span class="n">api_secret</span><span class="o">=</span><span class="n">api_secret</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

        <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">request_id</span><span class="p">,</span>
                   <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span>
                   <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="n">params</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">process_response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">process_response_lock</span><span class="p">:</span>
                <span class="n">entry</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;callback_function&#39;</span><span class="p">:</span> <span class="n">process_response</span><span class="p">}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">process_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">add_payload_to_stream</span><span class="p">(</span><span class="n">stream_id</span><span class="o">=</span><span class="n">stream_id</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">return_response</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response_lock</span><span class="p">:</span>
                <span class="n">entry</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;event_return_response&#39;</span><span class="p">:</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">][</span><span class="s1">&#39;event_return_response&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response_lock</span><span class="p">:</span>
                <span class="n">response_value</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">][</span><span class="s1">&#39;response_value&#39;</span><span class="p">])</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">response_value</span>

        <span class="k">return</span> <span class="n">new_client_order_id</span></div>


<div class="viewcode-block" id="BinanceWebSocketApiApi.create_test_order">
<a class="viewcode-back" href="../../unicorn_binance_websocket_api.html#unicorn_binance_websocket_api.api.BinanceWebSocketApiApi.create_test_order">[docs]</a>
    <span class="k">def</span> <span class="nf">create_test_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iceberg_qty</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">new_client_order_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">new_order_resp_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;ACK&#39;</span><span class="p">,</span> <span class="s1">&#39;RESULT&#39;</span><span class="p">,</span> <span class="s1">&#39;FULL&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">order_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;LIMIT&#39;</span><span class="p">,</span> <span class="s1">&#39;LIMIT_MAKER&#39;</span><span class="p">,</span> <span class="s1">&#39;MARKET&#39;</span><span class="p">,</span> <span class="s1">&#39;STOP_LOSS&#39;</span><span class="p">,</span> <span class="s1">&#39;STOP_LOSS_LIMIT&#39;</span><span class="p">,</span>
                                                       <span class="s1">&#39;TAKE_PROFIT&#39;</span><span class="p">,</span> <span class="s1">&#39;TAKE_PROFIT_LIMIT&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">price</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
                          <span class="n">process_response</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">quantity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
                          <span class="n">quote_order_qty</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">recv_window</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">request_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">return_response</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                          <span class="n">self_trade_prevention_mode</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;EXPIRE_TAKER&#39;</span><span class="p">,</span> <span class="s1">&#39;EXPIRE_MAKER&#39;</span><span class="p">,</span>
                                                                       <span class="s1">&#39;EXPIRE_BOTH&#39;</span><span class="p">,</span> <span class="s1">&#39;NONE&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">side</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;BUY&#39;</span><span class="p">,</span> <span class="s1">&#39;SELL&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">stop_price</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">strategy_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">strategy_type</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">stream_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">stream_label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">symbol</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">time_in_force</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;GTC&#39;</span><span class="p">,</span> <span class="s1">&#39;IOC&#39;</span><span class="p">,</span> <span class="s1">&#39;FOK&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;GTC&quot;</span><span class="p">,</span>
                          <span class="n">trailing_delta</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test order placement.</span>

<span class="sd">        Validates new order parameters and verifies your signature but does not send the order into the matching engine.</span>

<span class="sd">        Official documentation:</span>

<span class="sd">            - https://developers.binance.com/docs/binance-trading-api/websocket_api#test-new-order-trade</span>

<span class="sd">        :param iceberg_qty: Any `LIMIT` or `LIMIT_MAKER` order can be made into an iceberg order by specifying the</span>
<span class="sd">                            `icebergQty`. An order with an `icebergQty` must have `timeInForce` set to `GTC`.</span>
<span class="sd">        :type iceberg_qty: float</span>
<span class="sd">        :param new_client_order_id: `newClientOrderId` specifies `clientOrderId` value for the order. A new order with</span>
<span class="sd">                                    the same &#39;clientOrderId&#39; is accepted only when the previous one is filled or</span>
<span class="sd">                                    expired.</span>
<span class="sd">        :type new_client_order_id: str</span>
<span class="sd">        :param new_order_resp_type: Select response format: `ACK`, `RESULT`, `FULL`.</span>
<span class="sd">                                    &#39;MARKET&#39; and &#39;LIMIT&#39; orders use `FULL` by default, other order types default to</span>
<span class="sd">                                    &#39;ACK&#39;</span>
<span class="sd">        :type new_order_resp_type: str</span>
<span class="sd">        :param order_type: &#39;LIMIT&#39;, &#39;LIMIT_MAKER&#39;, &#39;MARKET&#39;, &#39;STOP_LOSS&#39;, &#39;STOP_LOSS_LIMIT&#39;, &#39;TAKE_PROFIT&#39;,</span>
<span class="sd">                           &#39;TAKE_PROFIT_LIMIT&#39;</span>

<span class="sd">                           Mandatory parameters per `order_type`:</span>

<span class="sd">                             - LIMIT: &#39;timeInForce&#39;, &#39;price&#39;, &#39;quantity&#39;</span>

<span class="sd">                             - LIMIT_MAKER: &#39;price&#39;, &#39;quantity&#39;</span>

<span class="sd">                             - MARKET: &#39;quantity&#39; or &#39;quoteOrderQty&#39;</span>

<span class="sd">                             - STOP_LOSS: &#39;quantity&#39;, &#39;stopPrice&#39; or &#39;trailingDelta&#39;</span>

<span class="sd">                             - STOP_LOSS_LIMIT: &#39;timeInForce&#39;, &#39;price&#39;, &#39;quantity&#39;, &#39;stopPrice&#39; or &#39;trailingDelta&#39;</span>

<span class="sd">                             - TAKE_PROFIT: &#39;quantity&#39;, &#39;stopPrice&#39; or &#39;trailingDelta&#39;</span>

<span class="sd">                             - TAKE_PROFIT_LIMIT: &#39;timeInForce&#39;, &#39;price&#39;, &#39;quantity&#39;, &#39;stopPrice&#39; or &#39;trailingDelta&#39;</span>
<span class="sd">        :type order_type: str</span>
<span class="sd">        :param price: Price e.g. 10.223</span>
<span class="sd">        :type price: float</span>
<span class="sd">        :param process_response: Provide a function/method to process the received webstream data (callback)</span>
<span class="sd">                                 of this specific request.</span>
<span class="sd">        :type process_response: function</span>
<span class="sd">        :param quantity: Amount e.g. 20.5</span>
<span class="sd">        :type quantity: float</span>
<span class="sd">        :param quote_order_qty: Amount e.g. 20.5</span>
<span class="sd">        :type quote_order_qty: float</span>
<span class="sd">        :param recv_window: An additional parameter, `recvWindow`, may be sent to specify the number of milliseconds</span>
<span class="sd">                            after timestamp the request is valid for. If `recvWindow` is not sent, it defaults to 5000.</span>
<span class="sd">                            The value cannot be greater than 60000.</span>
<span class="sd">        :type recv_window: int</span>
<span class="sd">        :param request_id: Provide a custom id for the request</span>
<span class="sd">        :type request_id: str</span>
<span class="sd">        :param return_response: If `True` the response of the API request is waited for and returned directly.</span>
<span class="sd">                                However, this increases the execution time of the function by the duration until the</span>
<span class="sd">                                response is received from the Binance API.</span>
<span class="sd">        :type return_response: bool</span>
<span class="sd">        :param self_trade_prevention_mode: The allowed enums for `selfTradePreventionMode` is dependent on what is</span>
<span class="sd">                                           configured on the symbol. The possible supported values are `EXPIRE_TAKER`,</span>
<span class="sd">                                           `EXPIRE_MAKER`, `EXPIRE_BOTH`, `NONE`.</span>
<span class="sd">        :type self_trade_prevention_mode: str</span>
<span class="sd">        :param side: `BUY` or `SELL`</span>
<span class="sd">        :type side: str</span>
<span class="sd">        :param strategy_id: Arbitrary numeric value identifying the order within an order strategy.</span>
<span class="sd">        :type strategy_id: int</span>
<span class="sd">        :param strategy_type: Arbitrary numeric value identifying the order strategy. Values smaller than 1000000 are</span>
<span class="sd">                              reserved and cannot be used.</span>
<span class="sd">        :type strategy_type: int</span>
<span class="sd">        :param stream_id: ID of a stream to send the request</span>
<span class="sd">        :type stream_id: str</span>
<span class="sd">        :param stream_label: Label of a stream to send the request. Only used if `stream_id` is not provided!</span>
<span class="sd">        :type stream_label: str</span>
<span class="sd">        :param stop_price: Trigger order price rules for STOP_LOSS/TAKE_PROFIT orders:</span>

<span class="sd">                             - `stopPrice` must be above market price: STOP_LOSS BUY, TAKE_PROFIT SELL</span>

<span class="sd">                             - stopPrice must be below market price: STOP_LOSS SELL, TAKE_PROFIT BUY</span>
<span class="sd">        :type stop_price: float</span>
<span class="sd">        :param symbol: The symbol you want to trade</span>
<span class="sd">        :type symbol: str</span>
<span class="sd">        :param time_in_force: Available timeInForce options, setting how long the order should be active before</span>
<span class="sd">                              expiration:</span>

<span class="sd">                                - GTC: Good &#39;til Canceled – the order will remain on the book until you cancel it, or</span>
<span class="sd">                                  the order is completely filled.</span>

<span class="sd">                                - IOC: Immediate or Cancel – the order will be filled for as much as possible, the</span>
<span class="sd">                                  unfilled quantity immediately expires.</span>

<span class="sd">                                - FOK: Fill or Kill – the order will expire unless it cannot be immediately filled for</span>
<span class="sd">                                  the entire quantity.</span>

<span class="sd">                              `MARKET` orders using `quoteOrderQty` follow `LOT_SIZE` filter rules. The order will</span>
<span class="sd">                              execute a quantity that has notional value as close as possible to requested</span>
<span class="sd">                              `quoteOrderQty`.</span>
<span class="sd">        :type time_in_force: str</span>
<span class="sd">        :param trailing_delta: For more details on SPOT implementation on trailing stops, please refer to</span>
<span class="sd">                               `Trailing Stop FAQ &lt;https://github.com/binance/binance-spot-api-docs/blob/master/faqs/trailing-stop-faq.md&gt;`_</span>
<span class="sd">        :type trailing_delta: int</span>

<span class="sd">        :return: `False` or `orig_client_order_id`</span>


<span class="sd">        Message sent:</span>

<span class="sd">        .. code-block:: json</span>

<span class="sd">            {</span>
<span class="sd">                &quot;id&quot;: &quot;56374a46-3061-486b-a311-99ee972eb648&quot;,</span>
<span class="sd">                &quot;method&quot;: &quot;order.test&quot;,</span>
<span class="sd">                &quot;params&quot;: {</span>
<span class="sd">                    &quot;symbol&quot;: &quot;BTCUSDT&quot;,</span>
<span class="sd">                    &quot;side&quot;: &quot;SELL&quot;,</span>
<span class="sd">                    &quot;type&quot;: &quot;LIMIT&quot;,</span>
<span class="sd">                    &quot;timeInForce&quot;: &quot;GTC&quot;,</span>
<span class="sd">                    &quot;price&quot;: &quot;23416.10000000&quot;,</span>
<span class="sd">                    &quot;quantity&quot;: &quot;0.00847000&quot;,</span>
<span class="sd">                    &quot;apiKey&quot;: &quot;vmPUZE6mv9SD5VNHk4HlWFsOr6aKE2zvsw0MuIgwCIPy6utIco14y7Ju91duEh8A&quot;,</span>
<span class="sd">                    &quot;signature&quot;: &quot;15af09e41c36f3cc61378c2fbe2c33719a03dd5eba8d0f9206fbda44de717c88&quot;,</span>
<span class="sd">                    &quot;timestamp&quot;: 1660801715431</span>
<span class="sd">                }</span>
<span class="sd">            }</span>


<span class="sd">        Response</span>

<span class="sd">        .. code-block:: json</span>

<span class="sd">            {</span>
<span class="sd">                &quot;id&quot;: &quot;56374a46-3061-486b-a311-99ee972eb648&quot;,</span>
<span class="sd">                &quot;status&quot;: 200,</span>
<span class="sd">                &quot;result&quot;: {</span>
<span class="sd">                    &quot;symbol&quot;: &quot;BTCUSDT&quot;,</span>
<span class="sd">                    &quot;orderId&quot;: 12569099453,</span>
<span class="sd">                    &quot;orderListId&quot;: -1,</span>
<span class="sd">                    &quot;clientOrderId&quot;: &quot;4d96324ff9d44481926157ec08158a40&quot;,</span>
<span class="sd">                    &quot;transactTime&quot;: 1660801715639</span>
<span class="sd">                },</span>
<span class="sd">                &quot;rateLimits&quot;: [</span>
<span class="sd">                    {</span>
<span class="sd">                        &quot;rateLimitType&quot;: &quot;ORDERS&quot;,</span>
<span class="sd">                        &quot;interval&quot;: &quot;SECOND&quot;,</span>
<span class="sd">                        &quot;intervalNum&quot;: 10,</span>
<span class="sd">                        &quot;limit&quot;: 50,</span>
<span class="sd">                        &quot;count&quot;: 1</span>
<span class="sd">                    },</span>
<span class="sd">                    {</span>
<span class="sd">                        &quot;rateLimitType&quot;: &quot;ORDERS&quot;,</span>
<span class="sd">                        &quot;interval&quot;: &quot;DAY&quot;,</span>
<span class="sd">                        &quot;intervalNum&quot;: 1,</span>
<span class="sd">                        &quot;limit&quot;: 160000,</span>
<span class="sd">                        &quot;count&quot;: 1</span>
<span class="sd">                    },</span>
<span class="sd">                    {</span>
<span class="sd">                        &quot;rateLimitType&quot;: &quot;REQUEST_WEIGHT&quot;,</span>
<span class="sd">                        &quot;interval&quot;: &quot;MINUTE&quot;,</span>
<span class="sd">                        &quot;intervalNum&quot;: 1,</span>
<span class="sd">                        &quot;limit&quot;: 1200,</span>
<span class="sd">                        &quot;count&quot;: 1</span>
<span class="sd">                    }</span>
<span class="sd">                ]</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_order</span><span class="p">(</span><span class="n">iceberg_qty</span><span class="o">=</span><span class="n">iceberg_qty</span><span class="p">,</span> <span class="n">new_client_order_id</span><span class="o">=</span><span class="n">new_client_order_id</span><span class="p">,</span>
                                 <span class="n">new_order_resp_type</span><span class="o">=</span><span class="n">new_order_resp_type</span><span class="p">,</span> <span class="n">price</span><span class="o">=</span><span class="n">price</span><span class="p">,</span> <span class="n">order_type</span><span class="o">=</span><span class="n">order_type</span><span class="p">,</span>
                                 <span class="n">process_response</span><span class="o">=</span><span class="n">process_response</span><span class="p">,</span> <span class="n">quantity</span><span class="o">=</span><span class="n">quantity</span><span class="p">,</span> <span class="n">quote_order_qty</span><span class="o">=</span><span class="n">quote_order_qty</span><span class="p">,</span>
                                 <span class="n">recv_window</span><span class="o">=</span><span class="n">recv_window</span><span class="p">,</span> <span class="n">request_id</span><span class="o">=</span><span class="n">request_id</span><span class="p">,</span> <span class="n">return_response</span><span class="o">=</span><span class="n">return_response</span><span class="p">,</span>
                                 <span class="n">self_trade_prevention_mode</span><span class="o">=</span><span class="n">self_trade_prevention_mode</span><span class="p">,</span> <span class="n">side</span><span class="o">=</span><span class="n">side</span><span class="p">,</span>
                                 <span class="n">stop_price</span><span class="o">=</span><span class="n">stop_price</span><span class="p">,</span> <span class="n">strategy_id</span><span class="o">=</span><span class="n">strategy_id</span><span class="p">,</span> <span class="n">strategy_type</span><span class="o">=</span><span class="n">strategy_type</span><span class="p">,</span>
                                 <span class="n">stream_id</span><span class="o">=</span><span class="n">stream_id</span><span class="p">,</span> <span class="n">stream_label</span><span class="o">=</span><span class="n">stream_label</span><span class="p">,</span> <span class="n">symbol</span><span class="o">=</span><span class="n">symbol</span><span class="p">,</span>
                                 <span class="n">time_in_force</span><span class="o">=</span><span class="n">time_in_force</span><span class="p">,</span> <span class="n">test</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">trailing_delta</span><span class="o">=</span><span class="n">trailing_delta</span><span class="p">)</span></div>


<div class="viewcode-block" id="BinanceWebSocketApiApi.get_account_status">
<a class="viewcode-back" href="../../unicorn_binance_websocket_api.html#unicorn_binance_websocket_api.api.BinanceWebSocketApiApi.get_account_status">[docs]</a>
    <span class="k">def</span> <span class="nf">get_account_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">process_response</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">recv_window</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">request_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                           <span class="n">return_response</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">stream_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stream_label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the user account status.</span>

<span class="sd">        Official documentation:</span>

<span class="sd">            - https://developers.binance.com/docs/binance-trading-api/websocket_api#account-information-user_data</span>

<span class="sd">        :param process_response: Provide a function/method to process the received webstream data (callback)</span>
<span class="sd">                                 of this specific request.</span>
<span class="sd">        :type process_response: function</span>
<span class="sd">        :param recv_window: An additional parameter, `recvWindow`, may be sent to specify the number of milliseconds</span>
<span class="sd">                            after timestamp the request is valid for. If `recvWindow` is not sent, it defaults to 5000.</span>
<span class="sd">                            The value cannot be greater than 60000.</span>
<span class="sd">        :type recv_window: int</span>
<span class="sd">        :param request_id: Provide a custom id for the request</span>
<span class="sd">        :type request_id: str</span>
<span class="sd">        :param return_response: If `True` the response of the API request is waited for and returned directly.</span>
<span class="sd">                                However, this increases the execution time of the function by the duration until the</span>
<span class="sd">                                response is received from the Binance API.</span>
<span class="sd">        :type return_response: bool</span>
<span class="sd">        :param stream_id: ID of a stream to send the request</span>
<span class="sd">        :type stream_id: str</span>
<span class="sd">        :param stream_label: Label of a stream to send the request. Only used if `stream_id` is not provided!</span>
<span class="sd">        :type stream_label: str</span>
<span class="sd">        :return: bool</span>


<span class="sd">        Message sent:</span>

<span class="sd">        .. code-block:: json</span>

<span class="sd">            {</span>
<span class="sd">                &quot;id&quot;: &quot;605a6d20-6588-4cb9-afa0-b0ab087507ba&quot;,</span>
<span class="sd">                &quot;method&quot;: &quot;account.status&quot;,</span>
<span class="sd">                &quot;params&quot;: {</span>
<span class="sd">                    &quot;apiKey&quot;: &quot;vmPUZE6mv9SD5VNHk4HlWFsOr6aKE2zvsw0MuIgwCIPy6utIco14y7Ju91duEh8A&quot;,</span>
<span class="sd">                    &quot;signature&quot;: &quot;83303b4a136ac1371795f465808367242685a9e3a42b22edb4d977d0696eb45c&quot;,</span>
<span class="sd">                    &quot;timestamp&quot;: 1660801839480</span>
<span class="sd">                }</span>
<span class="sd">            }</span>


<span class="sd">        Response:</span>

<span class="sd">        .. code-block:: json</span>

<span class="sd">            {</span>
<span class="sd">                &quot;id&quot;: &quot;605a6d20-6588-4cb9-afa0-b0ab087507ba&quot;,</span>
<span class="sd">                &quot;status&quot;: 200,</span>
<span class="sd">                &quot;result&quot;: {</span>
<span class="sd">                    &quot;makerCommission&quot;: 15,</span>
<span class="sd">                    &quot;takerCommission&quot;: 15,</span>
<span class="sd">                    &quot;buyerCommission&quot;: 0,</span>
<span class="sd">                    &quot;sellerCommission&quot;: 0,</span>
<span class="sd">                    &quot;canTrade&quot;: true,</span>
<span class="sd">                    &quot;canWithdraw&quot;: true,</span>
<span class="sd">                    &quot;canDeposit&quot;: true,</span>
<span class="sd">                    &quot;commissionRates&quot;: {</span>
<span class="sd">                        &quot;maker&quot;: &quot;0.00150000&quot;,</span>
<span class="sd">                        &quot;taker&quot;: &quot;0.00150000&quot;,</span>
<span class="sd">                        &quot;buyer&quot;: &quot;0.00000000&quot;,</span>
<span class="sd">                        &quot;seller&quot;:&quot;0.00000000&quot;</span>
<span class="sd">                    },</span>
<span class="sd">                    &quot;brokered&quot;: false,</span>
<span class="sd">                    &quot;requireSelfTradePrevention&quot;: false,</span>
<span class="sd">                    &quot;updateTime&quot;: 1660801833000,</span>
<span class="sd">                    &quot;accountType&quot;: &quot;SPOT&quot;,</span>
<span class="sd">                    &quot;balances&quot;: [</span>
<span class="sd">                        {</span>
<span class="sd">                            &quot;asset&quot;: &quot;BNB&quot;,</span>
<span class="sd">                            &quot;free&quot;: &quot;0.00000000&quot;,</span>
<span class="sd">                            &quot;locked&quot;: &quot;0.00000000&quot;</span>
<span class="sd">                        },</span>
<span class="sd">                        {</span>
<span class="sd">                            &quot;asset&quot;: &quot;BTC&quot;,</span>
<span class="sd">                            &quot;free&quot;: &quot;1.3447112&quot;,</span>
<span class="sd">                            &quot;locked&quot;: &quot;0.08600000&quot;</span>
<span class="sd">                        },</span>
<span class="sd">                        {</span>
<span class="sd">                            &quot;asset&quot;: &quot;USDT&quot;,</span>
<span class="sd">                            &quot;free&quot;: &quot;1021.21000000&quot;,</span>
<span class="sd">                            &quot;locked&quot;: &quot;0.00000000&quot;</span>
<span class="sd">                        }</span>
<span class="sd">                    ],</span>
<span class="sd">                    &quot;permissions&quot;: [</span>
<span class="sd">                        &quot;SPOT&quot;</span>
<span class="sd">                    ]</span>
<span class="sd">                },</span>
<span class="sd">                &quot;rateLimits&quot;: [</span>
<span class="sd">                    {</span>
<span class="sd">                        &quot;rateLimitType&quot;: &quot;REQUEST_WEIGHT&quot;,</span>
<span class="sd">                        &quot;interval&quot;: &quot;MINUTE&quot;,</span>
<span class="sd">                        &quot;intervalNum&quot;: 1,</span>
<span class="sd">                        &quot;limit&quot;: 1200,</span>
<span class="sd">                        &quot;count&quot;: 10</span>
<span class="sd">                    }</span>
<span class="sd">                ]</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">stream_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">stream_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">stream_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_stream_id_by_label</span><span class="p">(</span><span class="n">stream_label</span><span class="o">=</span><span class="n">stream_label</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">stream_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_the_one_active_websocket_api</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">stream_id</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;BinanceWebSocketApiApi.cancel_open_orders() - error_msg: No `stream_id` provided or &quot;</span>
                                <span class="sa">f</span><span class="s2">&quot;found!&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;apiKey&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">stream_list</span><span class="p">[</span><span class="n">stream_id</span><span class="p">][</span><span class="s1">&#39;api_key&#39;</span><span class="p">],</span>
                  <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_timestamp</span><span class="p">()}</span>

        <span class="k">if</span> <span class="n">recv_window</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;recvWindow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">recv_window</span><span class="p">)</span>

        <span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;account.status&quot;</span>
        <span class="n">api_secret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">stream_list</span><span class="p">[</span><span class="n">stream_id</span><span class="p">][</span><span class="s1">&#39;api_secret&#39;</span><span class="p">]</span>
        <span class="n">request_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_new_uuid_id</span><span class="p">()</span> <span class="k">if</span> <span class="n">request_id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">request_id</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;signature&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">generate_signature</span><span class="p">(</span><span class="n">api_secret</span><span class="o">=</span><span class="n">api_secret</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

        <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">request_id</span><span class="p">,</span>
                   <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span>
                   <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="n">params</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">process_response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">process_response_lock</span><span class="p">:</span>
                <span class="n">entry</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;callback_function&#39;</span><span class="p">:</span> <span class="n">process_response</span><span class="p">}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">process_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">add_payload_to_stream</span><span class="p">(</span><span class="n">stream_id</span><span class="o">=</span><span class="n">stream_id</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">return_response</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response_lock</span><span class="p">:</span>
                <span class="n">entry</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;event_return_response&#39;</span><span class="p">:</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">][</span><span class="s1">&#39;event_return_response&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response_lock</span><span class="p">:</span>
                <span class="n">response_value</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">][</span><span class="s1">&#39;response_value&#39;</span><span class="p">])</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">response_value</span>

        <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="BinanceWebSocketApiApi.get_exchange_info">
<a class="viewcode-back" href="../../unicorn_binance_websocket_api.html#unicorn_binance_websocket_api.api.BinanceWebSocketApiApi.get_exchange_info">[docs]</a>
    <span class="k">def</span> <span class="nf">get_exchange_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">permissions</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">process_response</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">recv_window</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">request_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">return_response</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">stream_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">stream_label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">symbol</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">symbols</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the Exchange Information.</span>

<span class="sd">        Only one of `symbol`, `symbols`, `permissions` parameters can be specified.</span>

<span class="sd">        Without parameters, `exchangeInfo` displays all symbols with [&quot;SPOT, &quot;MARGIN&quot;, &quot;LEVERAGED&quot;] permissions. In</span>
<span class="sd">        order to list all active symbols on the exchange, you need to explicitly request all permissions</span>

<span class="sd">        Official documentation:</span>

<span class="sd">            - https://developers.binance.com/docs/binance-trading-api/websocket_api#exchange-information</span>

<span class="sd">        :param permissions: Filter symbols by permissions. `permissions` accepts either a list of permissions, or a</span>
<span class="sd">                            single permission name: &quot;SPOT&quot;.</span>
<span class="sd">                            `Available Permissions &lt;https://developers.binance.com/docs/binance-trading-api/websocket_api#permissions&gt;`_</span>
<span class="sd">        :type permissions: list</span>
<span class="sd">        :param process_response: Provide a function/method to process the received webstream data (callback)</span>
<span class="sd">                                 of this specific request.</span>
<span class="sd">        :type process_response: function</span>
<span class="sd">        :param recv_window: An additional parameter, `recvWindow`, may be sent to specify the number of milliseconds</span>
<span class="sd">                            after timestamp the request is valid for. If `recvWindow` is not sent, it defaults to 5000.</span>
<span class="sd">                            The value cannot be greater than 60000.</span>
<span class="sd">        :type recv_window: int</span>
<span class="sd">        :param request_id: Provide a custom id for the request</span>
<span class="sd">        :type request_id: str</span>
<span class="sd">        :param return_response: If `True` the response of the API request is waited for and returned directly.</span>
<span class="sd">                                However, this increases the execution time of the function by the duration until the</span>
<span class="sd">                                response is received from the Binance API.</span>
<span class="sd">        :type return_response: bool</span>
<span class="sd">        :param stream_id: ID of a stream to send the request</span>
<span class="sd">        :type stream_id: str</span>
<span class="sd">        :param stream_label: Label of a stream to send the request. Only used if `stream_id` is not provided!</span>
<span class="sd">        :type stream_label: str</span>
<span class="sd">        :param symbol: Describe a single symbol</span>
<span class="sd">        :type symbol: str</span>
<span class="sd">        :param symbols: Describe multiple symbols.</span>
<span class="sd">        :type symbols: list</span>
<span class="sd">        :return: bool</span>


<span class="sd">        Message sent:</span>

<span class="sd">        .. code-block:: json</span>

<span class="sd">            {</span>
<span class="sd">                &quot;id&quot;: &quot;5494febb-d167-46a2-996d-70533eb4d976&quot;,</span>
<span class="sd">                &quot;method&quot;: &quot;exchangeInfo&quot;,</span>
<span class="sd">                &quot;params&quot;: {</span>
<span class="sd">                    &quot;symbols&quot;: [</span>
<span class="sd">                        &quot;BNBBTC&quot;</span>
<span class="sd">                    ]</span>
<span class="sd">                }</span>
<span class="sd">            }</span>


<span class="sd">        Response:</span>

<span class="sd">        .. code-block:: json</span>

<span class="sd">            {</span>
<span class="sd">                &quot;id&quot;: &quot;5494febb-d167-46a2-996d-70533eb4d976&quot;,</span>
<span class="sd">                &quot;status&quot;: 200,</span>
<span class="sd">                &quot;result&quot;: {</span>
<span class="sd">                &quot;timezone&quot;: &quot;UTC&quot;,</span>
<span class="sd">                &quot;serverTime&quot;: 1655969291181,</span>
<span class="sd">                &quot;rateLimits&quot;: [{</span>
<span class="sd">                    &quot;rateLimitType&quot;: &quot;REQUEST_WEIGHT&quot;,</span>
<span class="sd">                    &quot;interval&quot;: &quot;MINUTE&quot;,</span>
<span class="sd">                    &quot;intervalNum&quot;: 1,</span>
<span class="sd">                    &quot;limit&quot;: 1200</span>
<span class="sd">                },</span>
<span class="sd">                {</span>
<span class="sd">                    &quot;rateLimitType&quot;: &quot;ORDERS&quot;,</span>
<span class="sd">                    &quot;interval&quot;: &quot;SECOND&quot;,</span>
<span class="sd">                    &quot;intervalNum&quot;: 10,</span>
<span class="sd">                    &quot;limit&quot;: 50</span>
<span class="sd">                },</span>
<span class="sd">                {</span>
<span class="sd">                    &quot;rateLimitType&quot;: &quot;ORDERS&quot;,</span>
<span class="sd">                    &quot;interval&quot;: &quot;DAY&quot;,</span>
<span class="sd">                    &quot;intervalNum&quot;: 1,</span>
<span class="sd">                    &quot;limit&quot;: 160000</span>
<span class="sd">                },</span>
<span class="sd">                {</span>
<span class="sd">                    &quot;rateLimitType&quot;: &quot;RAW_REQUESTS&quot;,</span>
<span class="sd">                    &quot;interval&quot;: &quot;MINUTE&quot;,</span>
<span class="sd">                    &quot;intervalNum&quot;: 5,</span>
<span class="sd">                    &quot;limit&quot;: 6100</span>
<span class="sd">                }],</span>
<span class="sd">                &quot;exchangeFilters&quot;: [],</span>
<span class="sd">                &quot;symbols&quot;: [{</span>
<span class="sd">                    &quot;symbol&quot;: &quot;BNBBTC&quot;,</span>
<span class="sd">                    &quot;status&quot;: &quot;TRADING&quot;,</span>
<span class="sd">                    &quot;baseAsset&quot;: &quot;BNB&quot;,</span>
<span class="sd">                    &quot;baseAssetPrecision&quot;: 8,</span>
<span class="sd">                    &quot;quoteAsset&quot;: &quot;BTC&quot;,</span>
<span class="sd">                    &quot;quotePrecision&quot;: 8,</span>
<span class="sd">                    &quot;quoteAssetPrecision&quot;: 8,</span>
<span class="sd">                    &quot;baseCommissionPrecision&quot;: 8,</span>
<span class="sd">                    &quot;quoteCommissionPrecision&quot;: 8,</span>
<span class="sd">                    &quot;orderTypes&quot;: [</span>
<span class="sd">                        &quot;LIMIT&quot;,</span>
<span class="sd">                        &quot;LIMIT_MAKER&quot;,</span>
<span class="sd">                        &quot;MARKET&quot;,</span>
<span class="sd">                        &quot;STOP_LOSS_LIMIT&quot;,</span>
<span class="sd">                        &quot;TAKE_PROFIT_LIMIT&quot;</span>
<span class="sd">                    ],</span>
<span class="sd">                    &quot;icebergAllowed&quot;: true,</span>
<span class="sd">                    &quot;ocoAllowed&quot;: true,</span>
<span class="sd">                    &quot;quoteOrderQtyMarketAllowed&quot;: true,</span>
<span class="sd">                    &quot;allowTrailingStop&quot;: true,</span>
<span class="sd">                    &quot;cancelReplaceAllowed&quot;: true,</span>
<span class="sd">                    &quot;isSpotTradingAllowed&quot;: true,</span>
<span class="sd">                    &quot;isMarginTradingAllowed&quot;: true,</span>
<span class="sd">                    &quot;filters&quot;: [{</span>
<span class="sd">                        &quot;filterType&quot;: &quot;PRICE_FILTER&quot;,</span>
<span class="sd">                        &quot;minPrice&quot;: &quot;0.00000100&quot;,</span>
<span class="sd">                        &quot;maxPrice&quot;: &quot;100000.00000000&quot;,</span>
<span class="sd">                        &quot;tickSize&quot;: &quot;0.00000100&quot;</span>
<span class="sd">                    },</span>
<span class="sd">                    {</span>
<span class="sd">                        &quot;filterType&quot;: &quot;LOT_SIZE&quot;,</span>
<span class="sd">                        &quot;minQty&quot;: &quot;0.00100000&quot;,</span>
<span class="sd">                        &quot;maxQty&quot;: &quot;100000.00000000&quot;,</span>
<span class="sd">                        &quot;stepSize&quot;: &quot;0.00100000&quot;</span>
<span class="sd">                    }],</span>
<span class="sd">                    &quot;permissions&quot;: [</span>
<span class="sd">                        &quot;SPOT&quot;,</span>
<span class="sd">                        &quot;MARGIN&quot;,</span>
<span class="sd">                        &quot;TRD_GRP_004&quot;</span>
<span class="sd">                    ],</span>
<span class="sd">                    &quot;defaultSelfTradePreventionMode&quot;: &quot;NONE&quot;,</span>
<span class="sd">                    &quot;allowedSelfTradePreventionModes&quot;: [</span>
<span class="sd">                        &quot;NONE&quot;</span>
<span class="sd">                    ]</span>
<span class="sd">                }]},</span>
<span class="sd">                &quot;rateLimits&quot;: [{</span>
<span class="sd">                    &quot;rateLimitType&quot;: &quot;REQUEST_WEIGHT&quot;,</span>
<span class="sd">                    &quot;interval&quot;: &quot;MINUTE&quot;,</span>
<span class="sd">                    &quot;intervalNum&quot;: 1,</span>
<span class="sd">                    &quot;limit&quot;: 1200,</span>
<span class="sd">                    &quot;count&quot;: 10</span>
<span class="sd">                }]</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">stream_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">stream_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">stream_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_stream_id_by_label</span><span class="p">(</span><span class="n">stream_label</span><span class="o">=</span><span class="n">stream_label</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">stream_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_the_one_active_websocket_api</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">stream_id</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;BinanceWebSocketApiApi.cancel_open_orders() - error_msg: No `stream_id` provided or &quot;</span>
                                <span class="sa">f</span><span class="s2">&quot;found!&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">symbol</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">symbol</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">symbols</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">symbols</span> <span class="o">=</span> <span class="p">[</span><span class="n">symbol</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">symbols</span><span class="p">]</span>
            <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;symbols&quot;</span><span class="p">:</span> <span class="n">symbols</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">permissions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;permissions&quot;</span><span class="p">:</span> <span class="n">permissions</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">recv_window</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;recvWindow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">recv_window</span><span class="p">)</span>

        <span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;exchangeInfo&quot;</span>
        <span class="n">request_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_new_uuid_id</span><span class="p">()</span> <span class="k">if</span> <span class="n">request_id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">request_id</span>

        <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">request_id</span><span class="p">,</span>
                   <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span>
                   <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="n">params</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">process_response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">process_response_lock</span><span class="p">:</span>
                <span class="n">entry</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;callback_function&#39;</span><span class="p">:</span> <span class="n">process_response</span><span class="p">}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">process_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">add_payload_to_stream</span><span class="p">(</span><span class="n">stream_id</span><span class="o">=</span><span class="n">stream_id</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">return_response</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response_lock</span><span class="p">:</span>
                <span class="n">entry</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;event_return_response&#39;</span><span class="p">:</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">][</span><span class="s1">&#39;event_return_response&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response_lock</span><span class="p">:</span>
                <span class="n">response_value</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">][</span><span class="s1">&#39;response_value&#39;</span><span class="p">])</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">response_value</span>

        <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="BinanceWebSocketApiApi.get_open_orders">
<a class="viewcode-back" href="../../unicorn_binance_websocket_api.html#unicorn_binance_websocket_api.api.BinanceWebSocketApiApi.get_open_orders">[docs]</a>
    <span class="k">def</span> <span class="nf">get_open_orders</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">process_response</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">recv_window</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">request_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="n">return_response</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">stream_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stream_label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="n">symbol</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Query execution status of all open orders.</span>

<span class="sd">        Open orders are always returned as a flat list. If all symbols are requested, use the symbol field to tell</span>
<span class="sd">        which symbol the orders belong to.</span>

<span class="sd">        Official documentation:</span>

<span class="sd">            - https://developers.binance.com/docs/binance-trading-api/websocket_api#current-open-orders-user_data</span>

<span class="sd">        If you need to continuously monitor order status updates, please consider using</span>
<span class="sd">        &#39;WebSocket Streams &lt;https://unicorn-binance-websocket-api.docs.lucit.tech/unicorn_binance_websocket_api.html#unicorn_binance_websocket_api.manager.BinanceWebSocketApiManager.create_stream&gt;`_</span>

<span class="sd">          - `userData`</span>

<span class="sd">          - `executionReport` user data stream event</span>

<span class="sd">        :param process_response: Provide a function/method to process the received webstream data (callback)</span>
<span class="sd">                                 of this specific request.</span>
<span class="sd">        :type process_response: function</span>
<span class="sd">        :param recv_window: An additional parameter, `recvWindow`, may be sent to specify the number of milliseconds</span>
<span class="sd">                            after timestamp the request is valid for. If `recvWindow` is not sent, it defaults to 5000.</span>
<span class="sd">                            The value cannot be greater than 60000.</span>
<span class="sd">        :type recv_window: int</span>
<span class="sd">        :param request_id: Provide a custom id for the request</span>
<span class="sd">        :type request_id: str</span>
<span class="sd">        :param return_response: If `True` the response of the API request is waited for and returned directly.</span>
<span class="sd">                                However, this increases the execution time of the function by the duration until the</span>
<span class="sd">                                response is received from the Binance API.</span>
<span class="sd">        :type return_response: bool</span>
<span class="sd">        :param stream_id: ID of a stream to send the request</span>
<span class="sd">        :type stream_id: str</span>
<span class="sd">        :param stream_label: Label of a stream to send the request. Only used if `stream_id` is not provided!</span>
<span class="sd">        :type stream_label: str</span>
<span class="sd">        :param symbol: If omitted, open orders for all symbols are returned.</span>
<span class="sd">        :type symbol: str</span>
<span class="sd">        :return: bool</span>


<span class="sd">        Message Sent:</span>

<span class="sd">        .. code-block:: json</span>

<span class="sd">            {</span>
<span class="sd">                &quot;id&quot;: &quot;55f07876-4f6f-4c47-87dc-43e5fff3f2e7&quot;,</span>
<span class="sd">                &quot;method&quot;: &quot;openOrders.status&quot;,</span>
<span class="sd">                &quot;params&quot;: {</span>
<span class="sd">                    &quot;symbol&quot;: &quot;BTCUSDT&quot;,</span>
<span class="sd">                    &quot;apiKey&quot;: &quot;vmPUZE6mv9SD5VNHk4HlWFsOr6aKE2zvsw0MuIgwCIPy6utIco14y7Ju91duEh8A&quot;,</span>
<span class="sd">                    &quot;signature&quot;: &quot;d632b3fdb8a81dd44f82c7c901833309dd714fe508772a89b0a35b0ee0c48b89&quot;,</span>
<span class="sd">                    &quot;timestamp&quot;: 1660813156812</span>
<span class="sd">                }</span>
<span class="sd">            }</span>


<span class="sd">        Response:</span>

<span class="sd">        .. code-block:: json</span>

<span class="sd">            {</span>
<span class="sd">                &quot;id&quot;: &quot;55f07876-4f6f-4c47-87dc-43e5fff3f2e7&quot;,</span>
<span class="sd">                &quot;status&quot;: 200,</span>
<span class="sd">                &quot;result&quot;: [</span>
<span class="sd">                    {</span>
<span class="sd">                        &quot;symbol&quot;: &quot;BTCUSDT&quot;,</span>
<span class="sd">                        &quot;orderId&quot;: 12569099453,</span>
<span class="sd">                        &quot;orderListId&quot;: -1,</span>
<span class="sd">                        &quot;clientOrderId&quot;: &quot;4d96324ff9d44481926157&quot;,</span>
<span class="sd">                        &quot;price&quot;: &quot;23416.10000000&quot;,</span>
<span class="sd">                        &quot;origQty&quot;: &quot;0.00847000&quot;,</span>
<span class="sd">                        &quot;executedQty&quot;: &quot;0.00720000&quot;,</span>
<span class="sd">                        &quot;cummulativeQuoteQty&quot;: &quot;172.43931000&quot;,</span>
<span class="sd">                        &quot;status&quot;: &quot;PARTIALLY_FILLED&quot;,</span>
<span class="sd">                        &quot;timeInForce&quot;: &quot;GTC&quot;,</span>
<span class="sd">                        &quot;type&quot;: &quot;LIMIT&quot;,</span>
<span class="sd">                        &quot;side&quot;: &quot;SELL&quot;,</span>
<span class="sd">                        &quot;stopPrice&quot;: &quot;0.00000000&quot;,</span>
<span class="sd">                        &quot;icebergQty&quot;: &quot;0.00000000&quot;,</span>
<span class="sd">                        &quot;time&quot;: 1660801715639,</span>
<span class="sd">                        &quot;updateTime&quot;: 1660801717945,</span>
<span class="sd">                        &quot;isWorking&quot;: true,</span>
<span class="sd">                        &quot;workingTime&quot;: 1660801715639,</span>
<span class="sd">                        &quot;origQuoteOrderQty&quot;: &quot;0.00000000&quot;,</span>
<span class="sd">                        &quot;selfTradePreventionMode&quot;: &quot;NONE&quot;</span>
<span class="sd">                    }</span>
<span class="sd">                ],</span>
<span class="sd">                &quot;rateLimits&quot;: [</span>
<span class="sd">                    {</span>
<span class="sd">                        &quot;rateLimitType&quot;: &quot;REQUEST_WEIGHT&quot;,</span>
<span class="sd">                        &quot;interval&quot;: &quot;MINUTE&quot;,</span>
<span class="sd">                        &quot;intervalNum&quot;: 1,</span>
<span class="sd">                        &quot;limit&quot;: 1200,</span>
<span class="sd">                        &quot;count&quot;: 3</span>
<span class="sd">                    }</span>
<span class="sd">                ]</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">stream_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">stream_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">stream_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_stream_id_by_label</span><span class="p">(</span><span class="n">stream_label</span><span class="o">=</span><span class="n">stream_label</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">stream_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_the_one_active_websocket_api</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">stream_id</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;BinanceWebSocketApiApi.cancel_open_orders() - error_msg: No `stream_id` provided or &quot;</span>
                                <span class="sa">f</span><span class="s2">&quot;found!&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;apiKey&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">stream_list</span><span class="p">[</span><span class="n">stream_id</span><span class="p">][</span><span class="s1">&#39;api_key&#39;</span><span class="p">],</span>
                  <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">symbol</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span>
                  <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_timestamp</span><span class="p">()}</span>

        <span class="k">if</span> <span class="n">recv_window</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;recvWindow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">recv_window</span><span class="p">)</span>

        <span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;openOrders.status&quot;</span>
        <span class="n">api_secret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">stream_list</span><span class="p">[</span><span class="n">stream_id</span><span class="p">][</span><span class="s1">&#39;api_secret&#39;</span><span class="p">]</span>
        <span class="n">request_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_new_uuid_id</span><span class="p">()</span> <span class="k">if</span> <span class="n">request_id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">request_id</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;signature&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">generate_signature</span><span class="p">(</span><span class="n">api_secret</span><span class="o">=</span><span class="n">api_secret</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

        <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">request_id</span><span class="p">,</span>
                   <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span>
                   <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="n">params</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">process_response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">process_response_lock</span><span class="p">:</span>
                <span class="n">entry</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;callback_function&#39;</span><span class="p">:</span> <span class="n">process_response</span><span class="p">}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">process_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">add_payload_to_stream</span><span class="p">(</span><span class="n">stream_id</span><span class="o">=</span><span class="n">stream_id</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">return_response</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response_lock</span><span class="p">:</span>
                <span class="n">entry</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;event_return_response&#39;</span><span class="p">:</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">][</span><span class="s1">&#39;event_return_response&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response_lock</span><span class="p">:</span>
                <span class="n">response_value</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">][</span><span class="s1">&#39;response_value&#39;</span><span class="p">])</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">response_value</span>

        <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="BinanceWebSocketApiApi.get_order">
<a class="viewcode-back" href="../../unicorn_binance_websocket_api.html#unicorn_binance_websocket_api.api.BinanceWebSocketApiApi.get_order">[docs]</a>
    <span class="k">def</span> <span class="nf">get_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">orig_client_order_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">process_response</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                  <span class="n">recv_window</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">request_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">return_response</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">stream_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                  <span class="n">stream_label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">symbol</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check execution status of an order.</span>

<span class="sd">        Official documentation:</span>

<span class="sd">            - https://developers.binance.com/docs/binance-trading-api/websocket_api#query-order-user_data</span>

<span class="sd">        If both `orderId` and `origClientOrderId` parameters are specified, only `orderId` is used and</span>
<span class="sd">        `origClientOrderId` is ignored.</span>

<span class="sd">        For some historical orders the `cummulativeQuoteQty` response field may be negative, meaning the data is not</span>
<span class="sd">        available at this time.</span>

<span class="sd">        :param order_id: Lookup order by `orderId`.</span>
<span class="sd">        :type order_id: int</span>
<span class="sd">        :param orig_client_order_id: Lookup order by `clientOrderId`.</span>
<span class="sd">        :type orig_client_order_id: str</span>
<span class="sd">        :param process_response: Provide a function/method to process the received webstream data (callback)</span>
<span class="sd">                                 of this specific request.</span>
<span class="sd">        :type process_response: function</span>
<span class="sd">        :param recv_window: An additional parameter, `recvWindow`, may be sent to specify the number of milliseconds</span>
<span class="sd">                            after timestamp the request is valid for. If `recvWindow` is not sent, it defaults to 5000.</span>
<span class="sd">                            The value cannot be greater than 60000.</span>
<span class="sd">        :type recv_window: int</span>
<span class="sd">        :param request_id: Provide a custom id for the request</span>
<span class="sd">        :type request_id: str</span>
<span class="sd">        :param return_response: If `True` the response of the API request is waited for and returned directly.</span>
<span class="sd">                                However, this increases the execution time of the function by the duration until the</span>
<span class="sd">                                response is received from the Binance API.</span>
<span class="sd">        :type return_response: bool</span>
<span class="sd">        :param stream_id: ID of a stream to send the request</span>
<span class="sd">        :type stream_id: str</span>
<span class="sd">        :param stream_label: Label of a stream to send the request. Only used if `stream_id` is not provided!</span>
<span class="sd">        :type stream_label: str</span>
<span class="sd">        :param symbol: The symbol you want to trade</span>
<span class="sd">        :type symbol: str</span>
<span class="sd">        :return: bool</span>


<span class="sd">        Message sent:</span>

<span class="sd">        .. code-block:: json</span>

<span class="sd">            {</span>
<span class="sd">                &quot;id&quot;: &quot;aa62318a-5a97-4f3b-bdc7-640bbe33b291&quot;,</span>
<span class="sd">                &quot;method&quot;: &quot;order.status&quot;,</span>
<span class="sd">                &quot;params&quot;: {</span>
<span class="sd">                    &quot;symbol&quot;: &quot;BTCUSDT&quot;,</span>
<span class="sd">                    &quot;orderId&quot;: 12569099453,</span>
<span class="sd">                    &quot;apiKey&quot;: &quot;vmPUZE6mv9SD5VNHk4HlWFsOr6aKE2zvsw0MuIgwCIPy6utIco14y7Ju91duEh8A&quot;,</span>
<span class="sd">                    &quot;signature&quot;: &quot;2c3aab5a078ee4ea465ecd95523b77289f61476c2f238ec10c55ea6cb11a6f35&quot;,</span>
<span class="sd">                    &quot;timestamp&quot;: 1660801720951</span>
<span class="sd">                }</span>
<span class="sd">            }</span>

<span class="sd">        Response:</span>

<span class="sd">        .. code-block:: json</span>

<span class="sd">            {</span>
<span class="sd">                &quot;id&quot;: &quot;aa62318a-5a97-4f3b-bdc7-640bbe33b291&quot;,</span>
<span class="sd">                &quot;status&quot;: 200,</span>
<span class="sd">                &quot;result&quot;: {</span>
<span class="sd">                    &quot;symbol&quot;: &quot;BTCUSDT&quot;,</span>
<span class="sd">                    &quot;orderId&quot;: 12569099453,</span>
<span class="sd">                    &quot;orderListId&quot;: -1,</span>
<span class="sd">                    &quot;clientOrderId&quot;: &quot;4d96324ff9d44481926157&quot;,</span>
<span class="sd">                    &quot;price&quot;: &quot;23416.10000000&quot;,</span>
<span class="sd">                    &quot;origQty&quot;: &quot;0.00847000&quot;,</span>
<span class="sd">                    &quot;executedQty&quot;: &quot;0.00847000&quot;,</span>
<span class="sd">                    &quot;cummulativeQuoteQty&quot;: &quot;198.33521500&quot;,</span>
<span class="sd">                    &quot;status&quot;: &quot;FILLED&quot;,</span>
<span class="sd">                    &quot;timeInForce&quot;: &quot;GTC&quot;,</span>
<span class="sd">                    &quot;type&quot;: &quot;LIMIT&quot;,</span>
<span class="sd">                    &quot;side&quot;: &quot;SELL&quot;,</span>
<span class="sd">                    &quot;stopPrice&quot;: &quot;0.00000000&quot;,</span>
<span class="sd">                    &quot;trailingDelta&quot;: 10,</span>
<span class="sd">                    &quot;trailingTime&quot;: -1,</span>
<span class="sd">                    &quot;icebergQty&quot;: &quot;0.00000000&quot;,</span>
<span class="sd">                    &quot;time&quot;: 1660801715639,</span>
<span class="sd">                    &quot;updateTime&quot;: 1660801717945,</span>
<span class="sd">                    &quot;isWorking&quot;: true,</span>
<span class="sd">                    &quot;workingTime&quot;: 1660801715639,</span>
<span class="sd">                    &quot;origQuoteOrderQty&quot;: &quot;0.00000000&quot;,</span>
<span class="sd">                    &quot;strategyId&quot;: 37463720,</span>
<span class="sd">                    &quot;strategyType&quot;: 1000000,</span>
<span class="sd">                    &quot;selfTradePreventionMode&quot;: &quot;NONE&quot;,</span>
<span class="sd">                    &quot;preventedMatchId&quot;: 0,</span>
<span class="sd">                    &quot;preventedQuantity&quot;: &quot;1.200000&quot;</span>
<span class="sd">                },</span>
<span class="sd">                &quot;rateLimits&quot;: [</span>
<span class="sd">                    {</span>
<span class="sd">                        &quot;rateLimitType&quot;: &quot;REQUEST_WEIGHT&quot;,</span>
<span class="sd">                        &quot;interval&quot;: &quot;MINUTE&quot;,</span>
<span class="sd">                        &quot;intervalNum&quot;: 1,</span>
<span class="sd">                        &quot;limit&quot;: 1200,</span>
<span class="sd">                        &quot;count&quot;: 2</span>
<span class="sd">                    }</span>
<span class="sd">                ]</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">stream_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">stream_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">stream_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_stream_id_by_label</span><span class="p">(</span><span class="n">stream_label</span><span class="o">=</span><span class="n">stream_label</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">stream_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_the_one_active_websocket_api</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">stream_id</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;BinanceWebSocketApiApi.cancel_open_orders() - error_msg: No `stream_id` provided or &quot;</span>
                                <span class="sa">f</span><span class="s2">&quot;found!&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;apiKey&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">stream_list</span><span class="p">[</span><span class="n">stream_id</span><span class="p">][</span><span class="s1">&#39;api_key&#39;</span><span class="p">],</span>
                  <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">symbol</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span>
                  <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_timestamp</span><span class="p">()}</span>

        <span class="k">if</span> <span class="n">order_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;orderId&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">order_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">orig_client_order_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;origClientOrderId&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">orig_client_order_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">recv_window</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;recvWindow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">recv_window</span><span class="p">)</span>

        <span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;order.status&quot;</span>
        <span class="n">api_secret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">stream_list</span><span class="p">[</span><span class="n">stream_id</span><span class="p">][</span><span class="s1">&#39;api_secret&#39;</span><span class="p">]</span>
        <span class="n">request_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_new_uuid_id</span><span class="p">()</span> <span class="k">if</span> <span class="n">request_id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">request_id</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;signature&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">generate_signature</span><span class="p">(</span><span class="n">api_secret</span><span class="o">=</span><span class="n">api_secret</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

        <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">request_id</span><span class="p">,</span>
                   <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span>
                   <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="n">params</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">process_response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">process_response_lock</span><span class="p">:</span>
                <span class="n">entry</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;callback_function&#39;</span><span class="p">:</span> <span class="n">process_response</span><span class="p">}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">process_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">add_payload_to_stream</span><span class="p">(</span><span class="n">stream_id</span><span class="o">=</span><span class="n">stream_id</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">return_response</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response_lock</span><span class="p">:</span>
                <span class="n">entry</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;event_return_response&#39;</span><span class="p">:</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">][</span><span class="s1">&#39;event_return_response&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response_lock</span><span class="p">:</span>
                <span class="n">response_value</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">][</span><span class="s1">&#39;response_value&#39;</span><span class="p">])</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">response_value</span>

        <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="BinanceWebSocketApiApi.get_order_book">
<a class="viewcode-back" href="../../unicorn_binance_websocket_api.html#unicorn_binance_websocket_api.api.BinanceWebSocketApiApi.get_order_book">[docs]</a>
    <span class="k">def</span> <span class="nf">get_order_book</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">process_response</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">recv_window</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">request_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                       <span class="n">return_response</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">stream_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stream_label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                       <span class="n">symbol</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get current order book.</span>

<span class="sd">        Note that this request returns limited market depth.</span>

<span class="sd">        If you need to continuously monitor order book updates, please consider using</span>
<span class="sd">        &#39;WebSocket Streams &lt;https://unicorn-binance-websocket-api.docs.lucit.tech/unicorn_binance_websocket_api.html#unicorn_binance_websocket_api.manager.BinanceWebSocketApiManager.create_stream&gt;&#39;_</span>

<span class="sd">          - &lt;symbol&gt;@depth&lt;levels&gt;</span>

<span class="sd">          - &lt;symbol&gt;@depth</span>

<span class="sd">        Official documentation:</span>

<span class="sd">            - https://developers.binance.com/docs/binance-trading-api/websocket_api#order-book</span>

<span class="sd">        :param limit: Default 100; max 5000.</span>
<span class="sd">        :type limit: int</span>
<span class="sd">        :param process_response: Provide a function/method to process the received webstream data (callback)</span>
<span class="sd">                                 of this specific request.</span>
<span class="sd">        :type process_response: function</span>
<span class="sd">        :param recv_window: An additional parameter, `recvWindow`, may be sent to specify the number of milliseconds</span>
<span class="sd">                            after timestamp the request is valid for. If `recvWindow` is not sent, it defaults to 5000.</span>
<span class="sd">                            The value cannot be greater than 60000.</span>
<span class="sd">        :type recv_window: int</span>
<span class="sd">        :param request_id: Provide a custom id for the request</span>
<span class="sd">        :type request_id: str</span>
<span class="sd">        :param return_response: If `True` the response of the API request is waited for and returned directly.</span>
<span class="sd">                                However, this increases the execution time of the function by the duration until the</span>
<span class="sd">                                response is received from the Binance API.</span>
<span class="sd">        :type return_response: bool</span>
<span class="sd">        :param stream_id: ID of a stream to send the request</span>
<span class="sd">        :type stream_id: str</span>
<span class="sd">        :param stream_label: Label of a stream to send the request. Only used if `stream_id` is not provided!</span>
<span class="sd">        :type stream_label: str</span>
<span class="sd">        :param symbol: The selected symbol</span>
<span class="sd">        :type symbol: str</span>
<span class="sd">        :return: bool</span>


<span class="sd">        Message sent:</span>

<span class="sd">            .. code-block:: json</span>

<span class="sd">                {</span>
<span class="sd">                    &quot;id&quot;: &quot;5494febb-d167-46a2-996d-70533eb4d976&quot;,</span>
<span class="sd">                    &quot;method&quot;: &quot;depth&quot;,</span>
<span class="sd">                    &quot;params&quot;: {</span>
<span class="sd">                        &quot;symbol&quot;: &quot;BNBBTC&quot;,</span>
<span class="sd">                        &quot;limit&quot;: 5</span>
<span class="sd">                    }</span>
<span class="sd">                }</span>


<span class="sd">            Response:</span>

<span class="sd">            .. code-block:: json</span>

<span class="sd">                {</span>
<span class="sd">                    &quot;id&quot;: &quot;5494febb-d167-46a2-996d-70533eb4d976&quot;,</span>
<span class="sd">                    &quot;status&quot;: 200,</span>
<span class="sd">                    &quot;result&quot;: {</span>
<span class="sd">                        &quot;lastUpdateId&quot;: 2731179239,</span>
<span class="sd">                        &quot;bids&quot;: [</span>
<span class="sd">                            [</span>
<span class="sd">                                &quot;0.01379900&quot;,</span>
<span class="sd">                                &quot;3.43200000&quot;</span>
<span class="sd">                            ],</span>
<span class="sd">                            [</span>
<span class="sd">                                &quot;0.01379800&quot;,</span>
<span class="sd">                                &quot;3.24300000&quot;</span>
<span class="sd">                            ],</span>
<span class="sd">                            [</span>
<span class="sd">                                &quot;0.01379700&quot;,</span>
<span class="sd">                                &quot;10.45500000&quot;</span>
<span class="sd">                            ],</span>
<span class="sd">                            [</span>
<span class="sd">                                &quot;0.01379600&quot;,</span>
<span class="sd">                                &quot;3.82100000&quot;</span>
<span class="sd">                            ],</span>
<span class="sd">                            [</span>
<span class="sd">                                &quot;0.01379500&quot;,</span>
<span class="sd">                                &quot;10.26200000&quot;</span>
<span class="sd">                            ]</span>
<span class="sd">                        ],</span>
<span class="sd">                        &quot;asks&quot;: [</span>
<span class="sd">                            [</span>
<span class="sd">                                &quot;0.01380000&quot;,</span>
<span class="sd">                                &quot;5.91700000&quot;</span>
<span class="sd">                            ],</span>
<span class="sd">                            [</span>
<span class="sd">                                &quot;0.01380100&quot;,</span>
<span class="sd">                                &quot;6.01400000&quot;</span>
<span class="sd">                            ],</span>
<span class="sd">                            [</span>
<span class="sd">                                &quot;0.01380200&quot;,</span>
<span class="sd">                                &quot;0.26800000&quot;</span>
<span class="sd">                            ],</span>
<span class="sd">                            [</span>
<span class="sd">                                &quot;0.01380300&quot;,</span>
<span class="sd">                                &quot;0.33800000&quot;</span>
<span class="sd">                            ],</span>
<span class="sd">                            [</span>
<span class="sd">                                &quot;0.01380400&quot;,</span>
<span class="sd">                                &quot;0.26800000&quot;</span>
<span class="sd">                            ]</span>
<span class="sd">                        ]</span>
<span class="sd">                    },</span>
<span class="sd">                    &quot;rateLimits&quot;: [</span>
<span class="sd">                        {</span>
<span class="sd">                            &quot;rateLimitType&quot;: &quot;REQUEST_WEIGHT&quot;,</span>
<span class="sd">                            &quot;interval&quot;: &quot;MINUTE&quot;,</span>
<span class="sd">                            &quot;intervalNum&quot;: 1,</span>
<span class="sd">                            &quot;limit&quot;: 1200,</span>
<span class="sd">                            &quot;count&quot;: 1</span>
<span class="sd">                        }</span>
<span class="sd">                    ]</span>
<span class="sd">                }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">stream_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">stream_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">stream_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_stream_id_by_label</span><span class="p">(</span><span class="n">stream_label</span><span class="o">=</span><span class="n">stream_label</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">stream_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_the_one_active_websocket_api</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">stream_id</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;BinanceWebSocketApiApi.cancel_open_orders() - error_msg: No `stream_id` provided or &quot;</span>
                                <span class="sa">f</span><span class="s2">&quot;found!&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">symbol</span><span class="o">.</span><span class="n">upper</span><span class="p">()}</span>

        <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;limit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">limit</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">recv_window</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;recvWindow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">recv_window</span><span class="p">)</span>

        <span class="n">request_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_new_uuid_id</span><span class="p">()</span> <span class="k">if</span> <span class="n">request_id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">request_id</span>

        <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">request_id</span><span class="p">,</span>
                   <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;depth&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="n">params</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">process_response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">process_response_lock</span><span class="p">:</span>
                <span class="n">entry</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;callback_function&#39;</span><span class="p">:</span> <span class="n">process_response</span><span class="p">}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">process_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">add_payload_to_stream</span><span class="p">(</span><span class="n">stream_id</span><span class="o">=</span><span class="n">stream_id</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">return_response</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response_lock</span><span class="p">:</span>
                <span class="n">entry</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;event_return_response&#39;</span><span class="p">:</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">][</span><span class="s1">&#39;event_return_response&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response_lock</span><span class="p">:</span>
                <span class="n">response_value</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">][</span><span class="s1">&#39;response_value&#39;</span><span class="p">])</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">response_value</span>

        <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="BinanceWebSocketApiApi.get_server_time">
<a class="viewcode-back" href="../../unicorn_binance_websocket_api.html#unicorn_binance_websocket_api.api.BinanceWebSocketApiApi.get_server_time">[docs]</a>
    <span class="k">def</span> <span class="nf">get_server_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">process_response</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">request_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">return_response</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                        <span class="n">stream_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stream_label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test connectivity to the WebSocket API and get the current server time.</span>

<span class="sd">        Official documentation:</span>

<span class="sd">            - https://developers.binance.com/docs/binance-trading-api/websocket_api#check-server-time</span>

<span class="sd">        :param process_response: Provide a function/method to process the received webstream data (callback)</span>
<span class="sd">                                 of this specific request.</span>
<span class="sd">        :type process_response: function</span>
<span class="sd">        :param request_id: Provide a custom id for the request</span>
<span class="sd">        :type request_id: str</span>
<span class="sd">        :param return_response: If `True` the response of the API request is waited for and returned directly.</span>
<span class="sd">                                However, this increases the execution time of the function by the duration until the</span>
<span class="sd">                                response is received from the Binance API.</span>
<span class="sd">        :type return_response: bool</span>
<span class="sd">        :param stream_id: ID of a stream to send the request</span>
<span class="sd">        :type stream_id: str</span>
<span class="sd">        :param stream_label: Label of a stream to send the request. Only used if `stream_id` is not provided!</span>
<span class="sd">        :type stream_label: str</span>
<span class="sd">        :return: bool</span>


<span class="sd">        Message sent:</span>

<span class="sd">            .. code-block:: json</span>

<span class="sd">                {</span>
<span class="sd">                    &quot;id&quot;: &quot;187d3cb2-942d-484c-8271-4e2141bbadb1&quot;,</span>
<span class="sd">                    &quot;method&quot;: &quot;time&quot;</span>
<span class="sd">                }</span>


<span class="sd">            Response:</span>

<span class="sd">            .. code-block:: json</span>

<span class="sd">                {</span>
<span class="sd">                    &quot;id&quot;: &quot;187d3cb2-942d-484c-8271-4e2141bbadb1&quot;,</span>
<span class="sd">                    &quot;status&quot;: 200,</span>
<span class="sd">                    &quot;result&quot;: {</span>
<span class="sd">                        &quot;serverTime&quot;: 1656400526260</span>
<span class="sd">                    },</span>
<span class="sd">                    &quot;rateLimits&quot;: [{</span>
<span class="sd">                        &quot;rateLimitType&quot;: &quot;REQUEST_WEIGHT&quot;,</span>
<span class="sd">                        &quot;interval&quot;: &quot;MINUTE&quot;,</span>
<span class="sd">                        &quot;intervalNum&quot;: 1,</span>
<span class="sd">                        &quot;limit&quot;: 1200,</span>
<span class="sd">                        &quot;count&quot;: 1</span>
<span class="sd">                    }]</span>
<span class="sd">                }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">stream_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">stream_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">stream_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_stream_id_by_label</span><span class="p">(</span><span class="n">stream_label</span><span class="o">=</span><span class="n">stream_label</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">stream_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_the_one_active_websocket_api</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">stream_id</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;BinanceWebSocketApiApi.cancel_open_orders() - error_msg: No `stream_id` provided or &quot;</span>
                                <span class="sa">f</span><span class="s2">&quot;found!&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="n">request_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_new_uuid_id</span><span class="p">()</span> <span class="k">if</span> <span class="n">request_id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">request_id</span>

        <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">request_id</span><span class="p">,</span>
                   <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;time&quot;</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">process_response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">process_response_lock</span><span class="p">:</span>
                <span class="n">entry</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;callback_function&#39;</span><span class="p">:</span> <span class="n">process_response</span><span class="p">}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">process_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">add_payload_to_stream</span><span class="p">(</span><span class="n">stream_id</span><span class="o">=</span><span class="n">stream_id</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">return_response</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response_lock</span><span class="p">:</span>
                <span class="n">entry</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;event_return_response&#39;</span><span class="p">:</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">][</span><span class="s1">&#39;event_return_response&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response_lock</span><span class="p">:</span>
                <span class="n">response_value</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">][</span><span class="s1">&#39;response_value&#39;</span><span class="p">])</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">response_value</span>

        <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="BinanceWebSocketApiApi.ping">
<a class="viewcode-back" href="../../unicorn_binance_websocket_api.html#unicorn_binance_websocket_api.api.BinanceWebSocketApiApi.ping">[docs]</a>
    <span class="k">def</span> <span class="nf">ping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">process_response</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">request_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">return_response</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
             <span class="n">stream_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stream_label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test connectivity to the WebSocket API.</span>

<span class="sd">        Official documentation:</span>

<span class="sd">            - https://developers.binance.com/docs/binance-trading-api/websocket_api#test-connectivity</span>

<span class="sd">        :param process_response: Provide a function/method to process the received webstream data (callback)</span>
<span class="sd">                                 of this specific request.</span>
<span class="sd">        :type process_response: function</span>
<span class="sd">        :param request_id: Provide a custom id for the request</span>
<span class="sd">        :type request_id: str</span>
<span class="sd">        :param return_response: If `True` the response of the API request is waited for and returned directly.</span>
<span class="sd">                                However, this increases the execution time of the function by the duration until the</span>
<span class="sd">                                response is received from the Binance API.</span>
<span class="sd">        :type return_response: bool</span>
<span class="sd">        :param stream_id: ID of a stream to send the request</span>
<span class="sd">        :type stream_id: str</span>
<span class="sd">        :param stream_label: Label of a stream to send the request. Only used if `stream_id` is not provided!</span>
<span class="sd">        :type stream_label: str</span>
<span class="sd">        :return: bool</span>


<span class="sd">        Message sent:</span>

<span class="sd">            .. code-block:: json</span>

<span class="sd">                {</span>
<span class="sd">                    &quot;id&quot;: &quot;4e72973031d8-bff9-8481-c95b-c42414df&quot;,</span>
<span class="sd">                    &quot;method&quot;: &quot;ping&quot;</span>
<span class="sd">                }</span>


<span class="sd">            Response:</span>

<span class="sd">            .. code-block:: json</span>

<span class="sd">                {</span>
<span class="sd">                    &quot;id&quot;: &quot;4e72973031d8-bff9-8481-c95b-c42414df&quot;,</span>
<span class="sd">                    &quot;status&quot;: 200,</span>
<span class="sd">                    &quot;result&quot;: {},</span>
<span class="sd">                    &quot;rateLimits&quot;: [{</span>
<span class="sd">                        &quot;rateLimitType&quot;: &quot;REQUEST_WEIGHT&quot;,</span>
<span class="sd">                        &quot;interval&quot;: &quot;MINUTE&quot;,</span>
<span class="sd">                        &quot;intervalNum&quot;: 1,</span>
<span class="sd">                        &quot;limit&quot;: 1200,</span>
<span class="sd">                        &quot;count&quot;: 1</span>
<span class="sd">                    }]</span>
<span class="sd">                }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">stream_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">stream_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">stream_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_stream_id_by_label</span><span class="p">(</span><span class="n">stream_label</span><span class="o">=</span><span class="n">stream_label</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">stream_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_the_one_active_websocket_api</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">stream_id</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;BinanceWebSocketApiApi.cancel_open_orders() - error_msg: No `stream_id` provided or &quot;</span>
                                <span class="sa">f</span><span class="s2">&quot;found!&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="n">request_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">get_new_uuid_id</span><span class="p">()</span> <span class="k">if</span> <span class="n">request_id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">request_id</span>

        <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">request_id</span><span class="p">,</span>
                   <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;ping&quot;</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">process_response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">process_response_lock</span><span class="p">:</span>
                <span class="n">entry</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;callback_function&#39;</span><span class="p">:</span> <span class="n">process_response</span><span class="p">}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">process_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">add_payload_to_stream</span><span class="p">(</span><span class="n">stream_id</span><span class="o">=</span><span class="n">stream_id</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">return_response</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response_lock</span><span class="p">:</span>
                <span class="n">entry</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;event_return_response&#39;</span><span class="p">:</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">][</span><span class="s1">&#39;event_return_response&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response_lock</span><span class="p">:</span>
                <span class="n">response_value</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">][</span><span class="s1">&#39;response_value&#39;</span><span class="p">])</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">manager</span><span class="o">.</span><span class="n">return_response</span><span class="p">[</span><span class="n">request_id</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">response_value</span>

        <span class="k">return</span> <span class="kc">True</span></div>
</div>

</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo">
                <div style="text-align: center;">
                    <a href="https://www.lucit.tech"><img src="https://www.lucit.tech/files/images/logos/LUCIT-LOGO.png"></a><br>
                    <a href="https://shop.lucit.services/software/unicorn-binance-suite" style="font-size: 0.85em;font-weight: 900">Get a UNICORN Binance Suite License!</a><br>
                    <br>
                    <a href="https://github.com/LUCIT-Systems-and-Development" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-github-20.png"></a>
                    <a href="https://fb.me/lucit.systems.and.development" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-facebook-20.png"></a>
                    <a href="https://twitter.com/LUCIT_SysDev" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-twitter-20.png"></a>
                    <a href="https://www.linkedin.com/company/lucit-systems-and-development" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-linkedin-20.png"></a>
                    <a href="https://www.xing.com/pages/lucit-systems-and-development" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-xing-20.png"></a>
                    <a href="https://medium.lucit.tech" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-medium-monogram-20.png"></a>
                    <a href="https://www.youtube.com/channel/UCp57u8vaPqEWQTlfpYn-KnQ" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-youtube-20.png"></a>
                </div>
            </p>
<div id="searchbox" style="display: block" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<div role="note" aria-label="source code">
    <h3>GitHub</h3>
    <ul class="this-page-menu">
      <li><a href="https://github.com/LUCIT-Systems-and-Development/unicorn-binance-websocket-api">Show Source</a></li>
      
<li>
<a class="github-button" href="https://github.com/LUCIT-Systems-and-Development/unicorn-binance-websocket-api"
   data-icon="octicon-star" data-show-count="true"
   aria-label="Star LUCIT-Systems-and-Development/unicorn-binance-websocket-api on GitHub">Star</a>
<br />
<a class="github-button" href="https://github.com/LUCIT-Systems-and-Development/unicorn-binance-websocket-api/subscription"
   data-icon="octicon-eye" data-show-count="true"
   aria-label="Watch LUCIT-Systems-and-Development/unicorn-binance-websocket-api on GitHub">Watch</a>
<br />
<a class="github-button" href="https://github.com/LUCIT-Systems-and-Development/unicorn-binance-websocket-api/fork"
   data-icon="octicon-repo-forked" data-show-count="true"
   aria-label="Fork LUCIT-Systems-and-Development/unicorn-binance-websocket-api on GitHub">Fork</a>
<br />
<a class="github-button" href="https://github.com/LUCIT-Systems-and-Development/unicorn-binance-websocket-api/issues"
   data-icon="octicon-issue-opened"
   data-show-count="true" aria-label="Issue LUCIT-Systems-and-Development/unicorn-binance-websocket-api on GitHub">Issue</a>
    
</li>

    </ul>
</div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
              
                  
                  
              <li><img src="../../_static/lucit.png" alt="LUCIT Logo"
                       style="vertical-align: middle; margin-top: -1px"/></li>
              <li><a href="https://docs.lucit.tech">Docs Index</a> | </li>
              <li><a href="https://www.lucit.tech/unicorn-binance-websocket-api.html">unicorn-binance-websocket-api</a> &#187;</li>
                  
              
              
              <a href="../../index.html">Docs</a> &#187;
              
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">unicorn_binance_websocket_api.api</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../../search.html" method="get">
          <input placeholder="Quick search" aria-label="Quick search" type="text" name="q" />
          <input type="submit" value="Go" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>  
    <div class="footer">
    <a href="https://docs.lucit.tech">Index of all LUCIT Software Documentation</a><br />
    &copy; <a href="/license.html">Copyright</a> 2023-2023, LUCIT Systems and Development. All Rights Reserved..
    See <a href="/license.html">License</a> for more information.<br />
    Last updated on Mar 13 2024 at 22:15 (CET).
    <a href="https://github.com/LUCIT-Systems-and-Development/unicorn-binance-websocket-api/issues/new/choose">Found a bug</a>?
    <br />
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
        with <a href="https://github.com/LUCIT-Systems-and-Development/python-docs-theme-lucit">python-docs-theme-lucit</a>
        by <a href="https://www.lucit.tech">LUCIT Systems and Development</a>.
    </div>
    
    <img referrerpolicy="no-referrer-when-downgrade" src="https://webmon.lucit.services/matomo.php?idsite=3&amp;rec=1" style="border:0" alt="" />
    

  </body>
</html>